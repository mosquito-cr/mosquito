crystal_doc_search_index_callback({"repository_name":"mosquito","body":"<img src=\"logo/logotype_horizontal.svg\" alt=\"mosquito\">\n\n![GitHub Workflow Status](https://img.shields.io/github/workflow/status/mosquito-cr/mosquito/Test%20and%20Demo?style=for-the-badge)\n[![GitHub](https://img.shields.io/github/license/mosquito-cr/mosquito.svg?style=for-the-badge)](https://tldrlegal.com/license/mit-license)\n\n<img src=\"https://mosquito-cr.github.io/images/amber-mosquito-small.png\" align=\"right\">\n\nMosquito is a generic background job runner written primarily for Crystal. Significant inspiration from experience with the successes and failings many Ruby gems in this vein.\n\nMosquito currently provides these features:\n- Delayed execution\n- Scheduled / Periodic execution\n- Job Storage in Redis\n- Automatic rescheduling of failed jobs\n- Progressively increasing delay of failed jobs\n- Dead letter queue of jobs which have failed too many times\n- Rate limited jobs\n\nCurrent Limitations:\n- Visibility into the job queue is difficult and must be done through redis manually.\n\n\n## Project State\n\nThe Mosquito project is stable. A few folks are using Mosquito in production, and it's going okay.\n\nThere are some features which would be nice to have, but what is here is both tried and tested.\n\nIf you're using Mosquito, please [get in touch](https://github.com/mosquito-cr/mosquito/discussions) on the Discussion board or [on Crystal chat](https://crystal-lang.org/community/) with any questions, feature suggestions, or feedback.\n\n## Installation\n\nUpdate your `shard.yml` to include mosquito:\n\n```diff\ndependencies:\n+  mosquito:\n+    github: mosquito-cr/mosquito\n```\n\nFurther installation instructions are available for use with web frameworks as well as a vanilla crystal application:\n\n- [Installing with Lucky](https://github.com/mosquito-cr/mosquito/wiki/Usage:-Lucky)\n- [Installing with Amber](https://github.com/mosquito-cr/mosquito/wiki/Usage:-Amber)\n- [Adding to a vanilla crystal application](https://github.com/mosquito-cr/mosquito/wiki/Usage:-vanilla-crystal)\n\n## Usage\n\n### Step 1: Define a queued job\n\n```crystal\n# src/jobs/puts_job.cr\nclass PutsJob < Mosquito::QueuedJob\n  params message : String\n\n  def perform\n    puts message\n  end\nend\n```\n\n### Step 2: Trigger that job\n\n```crystal\n# src/<somewher>/<somefile>.cr\nPutsJob.new(message: \"ohai background job\").enqueue\n```\n\n### Step 3: Run your worker to process the job\n\n```crystal\n# src/worker.cr\n\nMosquito.configure do |settings|\n  settings.redis_url = ENV[\"REDIS_URL\"]\nend\n\nMosquito::Runner.start\n```\n\n```text\ncrystal run src/worker.cr\n```\n\n### Success\n\n```\n> crystal run src/worker.cr\n2017-11-06 17:07:29 - Mosquito is buzzing...\n2017-11-06 17:07:51 - Running task puts_job<...> from puts_job\n2017-11-06 17:07:51 - [PutsJob] ohai background job\n2017-11-06 17:07:51 - task puts_job<...> succeeded, took 0.0 seconds\n```\n\n[More information about queued jobs](https://github.com/mosquito-cr/mosquito/wiki/Queued-jobs) in the wiki.\n\n------\n\n## Periodic Jobs\n\nPeriodic jobs run according to a predefined period. \n\nThis periodic job:\n```crystal\nclass PeriodicallyPutsJob < Mosquito::PeriodicJob\n  run_every 1.minute\n\n  def perform\n    emotions = %w{happy sad angry optimistic political skeptical epuhoric}\n    puts \"The time is now #{Time.local} and the wizard is feeling #{emotions.sample}\"\n  end\nend\n```\n\nWould produce this output:\n```crystal\n2017-11-06 17:20:13 - Mosquito is buzzing...\n2017-11-06 17:20:13 - Queues: periodically_puts_job\n2017-11-06 17:20:13 - Running task periodically_puts_job<...> from periodically_puts_job\n2017-11-06 17:20:13 - [PeriodicallyPutsJob] The time is now 2017-11-06 17:20:13 and the wizard is feeling skeptical\n2017-11-06 17:20:13 - task periodically_puts_job<...> succeeded, took 0.0 seconds\n2017-11-06 17:21:14 - Queues: periodically_puts_job\n2017-11-06 17:21:14 - Running task periodically_puts_job<...> from periodically_puts_job\n2017-11-06 17:21:14 - [PeriodicallyPutsJob] The time is now 2017-11-06 17:21:14 and the wizard is feeling optimistic\n2017-11-06 17:21:14 - task periodically_puts_job<...> succeeded, took 0.0 seconds\n2017-11-06 17:22:15 - Queues: periodically_puts_job\n2017-11-06 17:22:15 - Running task periodically_puts_job<...> from periodically_puts_job\n2017-11-06 17:22:15 - [PeriodicallyPutsJob] The time is now 2017-11-06 17:22:15 and the wizard is feeling political\n2017-11-06 17:22:15 - task periodically_puts_job<...> succeeded, took 0.0 seconds\n```\n\nMore information: [periodic jobs on the wiki](https://github.com/mosquito-cr/mosquito/wiki/Periodic-Jobs)\n\n## Throttling Jobs\n\nJobs can be throttled to limit the number of messages that get executed within a given period of time.  For example, if 10 messages were enqueued for `ThrottledJob`Â at one time; 5 would be executed immediately, then pause for a minute, then execute the last 5.\n\n```crystal\nclass ThrottledJob < Mosquito::QueuedJob\n  params message : String\n  throttle limit: 5, period: 60\n\n  def perform\n    puts message\n  end\nend\n```\n\n\n## Connecting to Redis\n\nMosquito uses [Redis](https://redis.io/) to schedule jobs and store metadata about those jobs. Conventionally, redis connections are configured by an environment variable. To pass that configuration to Mosqito,\n\n```crystal\nMosquito.configure do |settings|\n  settings.redis_url = ENV[\"REDIS_URL\"]\nend\n```\n\n\n## Contributing\n\nContributions are welcome. Please fork the repository, commit changes on a branch, and then open a pull request.\n\n### Testing\n\nThis repository uses [minitest](https://github.com/ysbaddaden/minitest.cr) for testing. As a result, `crystal spec` doesn't do anything helpful. Do this instead:\n\n```\nmake test\n```\n\nIn lieu of `crystal spec` bells and whistles, Minitest provides a nice alternative to [running one test at a time instead of the whole suite](https://github.com/ysbaddaden/minitest.cr/pull/31).\n","program":{"html_id":"mosquito/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"mosquito","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"mosquito/Mosquito","path":"Mosquito.html","kind":"module","full_name":"Mosquito","name":"Mosquito","abstract":false,"ancestors":[{"html_id":"mosquito/Habitat/SettingsHelpers","kind":"module","full_name":"Habitat::SettingsHelpers","name":"SettingsHelpers"},{"html_id":"mosquito/Habitat/TempConfig","kind":"module","full_name":"Habitat::TempConfig","name":"TempConfig"}],"locations":[{"filename":"src/mosquito.cr","line_number":5,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L5"},{"filename":"src/mosquito/backend.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L1"},{"filename":"src/mosquito/base.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L1"},{"filename":"src/mosquito/exceptions.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/exceptions.cr#L1"},{"filename":"src/mosquito/job.cr","line_number":4,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L4"},{"filename":"src/mosquito/key_builder.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/key_builder.cr#L1"},{"filename":"src/mosquito/log.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/log.cr#L3"},{"filename":"src/mosquito/metadata.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L1"},{"filename":"src/mosquito/nil_job.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/nil_job.cr#L1"},{"filename":"src/mosquito/periodic_job.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_job.cr#L1"},{"filename":"src/mosquito/periodic_task.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L1"},{"filename":"src/mosquito/queue.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L1"},{"filename":"src/mosquito/queued_job.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queued_job.cr#L1"},{"filename":"src/mosquito/redis.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis.cr#L3"},{"filename":"src/mosquito/redis_backend.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L1"},{"filename":"src/mosquito/runner.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L3"},{"filename":"src/mosquito/scheduled_job.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/scheduled_job.cr#L1"},{"filename":"src/mosquito/task.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L1"},{"filename":"src/mosquito/version.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/version.cr#L1"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"HABITAT_SETTINGS","name":"HABITAT_SETTINGS","value":"[{decl: redis_url : String, example: nil, validation: nil}, {decl: idle_wait : Float64 = 0.1, example: nil, validation: nil}, {decl: successful_job_ttl : Int32 = 1, example: nil, validation: nil}, {decl: failed_job_ttl : Int32 = 86400, example: nil, validation: nil}, {decl: run_cron_scheduler : Bool = true, example: nil, validation: nil}, {decl: run_from : Array(String) = [] of String, example: nil, validation: nil}, {decl: backend : Mosquito::Backend.class = Mosquito::RedisBackend, example: nil, validation: nil}] of Nil"},{"id":"Log","name":"Log","value":"::Log.for(self)"},{"id":"VERSION","name":"VERSION","value":"\"1.0.0.rc1\""}],"included_modules":[{"html_id":"mosquito/Habitat/SettingsHelpers","kind":"module","full_name":"Habitat::SettingsHelpers","name":"SettingsHelpers"},{"html_id":"mosquito/Habitat/TempConfig","kind":"module","full_name":"Habitat::TempConfig","name":"TempConfig"}],"class_methods":[{"html_id":"backend-class-method","name":"backend","abstract":false,"location":{"filename":"src/mosquito.cr","line_number":46,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L46"},"def":{"name":"backend","visibility":"Public","body":"settings.backend"}},{"html_id":"configure(&)-class-method","name":"configure","abstract":false,"location":{"filename":"src/mosquito.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L6"},"def":{"name":"configure","yields":1,"visibility":"Public","body":"yield settings"}},{"html_id":"settings-class-method","name":"settings","abstract":false,"location":{"filename":"src/mosquito.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L6"},"def":{"name":"settings","visibility":"Public","body":"HabitatSettings"}},{"html_id":"validate_settings-class-method","name":"validate_settings","abstract":false,"location":{"filename":"src/mosquito.cr","line_number":25,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L25"},"def":{"name":"validate_settings","visibility":"Public","body":"if @@settings_validated\n  return\nend\n@@settings_validated = true\nif settings.redis_url?.nil?\n  message = \"Mosquito cannot start because the redis connection string hasn't been provided.\\n\\nFor example, in your application config:\\n\\nMosquito.configure do |settings|\\n  settings.redis_url = (ENV[\\\"REDIS_TLS_URL\\\"]? || ENV[\\\"REDIS_URL\\\"]? || \\\"redis://localhost:6379\\\")\\nend\\n\\nSee Also: https://github.com/mosquito-cr/mosquito#connecting-to-redis\"\n  raise(message)\nend\n"}}],"instance_methods":[{"html_id":"settings-instance-method","name":"settings","abstract":false,"location":{"filename":"src/mosquito.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L6"},"def":{"name":"settings","visibility":"Public","body":"HabitatSettings"}}],"types":[{"html_id":"mosquito/Mosquito/Backend","path":"Mosquito/Backend.html","kind":"class","full_name":"Mosquito::Backend","name":"Backend","abstract":true,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/backend.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"KEY_PREFIX","name":"KEY_PREFIX","value":"{\"mosquito\"}"}],"subclasses":[{"html_id":"mosquito/Mosquito/RedisBackend","kind":"class","full_name":"Mosquito::RedisBackend","name":"RedisBackend"}],"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"class_methods":[{"html_id":"build_key(*parts)-class-method","name":"build_key","abstract":false,"args":[{"name":"parts","external_name":"parts","restriction":""}],"args_string":"(*parts)","args_html":"(*parts)","location":{"filename":"src/mosquito/backend.cr","line_number":9,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L9"},"def":{"name":"build_key","args":[{"name":"parts","external_name":"parts","restriction":""}],"splat_index":0,"visibility":"Public","body":"KeyBuilder.build(KEY_PREFIX, *parts)"}},{"html_id":"named(name)-class-method","name":"named","abstract":false,"args":[{"name":"name","external_name":"name","restriction":""}],"args_string":"(name)","args_html":"(name)","location":{"filename":"src/mosquito/backend.cr","line_number":5,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L5"},"def":{"name":"named","args":[{"name":"name","external_name":"name","restriction":""}],"visibility":"Public","body":"new(name)"}}],"constructors":[{"html_id":"new(name:String|Symbol)-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String | Symbol"}],"args_string":"(name : String | Symbol)","args_html":"(name : String | Symbol)","location":{"filename":"src/mosquito/backend.cr","line_number":19,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L19"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String | Symbol"}],"visibility":"Public","body":"_ = allocate\n_.initialize(name)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"build_key(*parts)-instance-method","name":"build_key","abstract":false,"args":[{"name":"parts","external_name":"parts","restriction":""}],"args_string":"(*parts)","args_html":"(*parts)","location":{"filename":"src/mosquito/backend.cr","line_number":13,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L13"},"def":{"name":"build_key","args":[{"name":"parts","external_name":"parts","restriction":""}],"splat_index":0,"visibility":"Public","body":"self.class.build_key(*parts)"}},{"html_id":"delete(key:String,inttl=0):Nil-instance-method","name":"delete","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"ttl","default_value":"0","external_name":"in","restriction":""}],"args_string":"(key : String, in ttl = 0) : Nil","args_html":"(key : String, in ttl = <span class=\"n\">0</span>) : Nil","location":{"filename":"src/mosquito/backend.cr","line_number":53,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L53"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"ttl","default_value":"0","external_name":"in","restriction":""}],"return_type":"Nil","visibility":"Public","body":"self.class.delete(key)"}},{"html_id":"dequeue:Task?-instance-method","name":"dequeue","abstract":true,"location":{"filename":"src/mosquito/backend.cr","line_number":63,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L63"},"def":{"name":"dequeue","return_type":"Task | ::Nil","visibility":"Public","body":""}},{"html_id":"deschedule:Array(Task)-instance-method","name":"deschedule","abstract":true,"location":{"filename":"src/mosquito/backend.cr","line_number":65,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L65"},"def":{"name":"deschedule","return_type":"Array(Task)","visibility":"Public","body":""}},{"html_id":"enqueue(task:Task):Task-instance-method","name":"enqueue","doc":"from queue.cr","summary":"<p>from queue.cr</p>","abstract":true,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task) : Task","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/backend.cr","line_number":62,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L62"},"def":{"name":"enqueue","args":[{"name":"task","external_name":"task","restriction":"Task"}],"return_type":"Task","visibility":"Public","body":""}},{"html_id":"expires_in(key:String):Int64-instance-method","name":"expires_in","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Int64","args_html":"(key : String) : Int64","location":{"filename":"src/mosquito/backend.cr","line_number":57,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L57"},"def":{"name":"expires_in","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Int64","visibility":"Public","body":"self.class.expires_in(key)"}},{"html_id":"finish(task:Task)-instance-method","name":"finish","abstract":true,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task)","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>)","location":{"filename":"src/mosquito/backend.cr","line_number":66,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L66"},"def":{"name":"finish","args":[{"name":"task","external_name":"task","restriction":"Task"}],"visibility":"Public","body":""}},{"html_id":"flush:Nil-instance-method","name":"flush","abstract":true,"location":{"filename":"src/mosquito/backend.cr","line_number":68,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L68"},"def":{"name":"flush","return_type":"Nil","visibility":"Public","body":""}},{"html_id":"retrieve(key:String):Hash(String,String)-instance-method","name":"retrieve","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Hash(String, String)","args_html":"(key : String) : Hash(String, String)","location":{"filename":"src/mosquito/backend.cr","line_number":49,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L49"},"def":{"name":"retrieve","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Hash(String, String)","visibility":"Public","body":"self.class.retrieve(key)"}},{"html_id":"schedule(task:Task,atscheduled_time:Time):Task-instance-method","name":"schedule","abstract":true,"args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"scheduled_time","external_name":"at","restriction":"Time"}],"args_string":"(task : Task, at scheduled_time : Time) : Task","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>, at scheduled_time : Time) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/backend.cr","line_number":64,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L64"},"def":{"name":"schedule","args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"scheduled_time","external_name":"at","restriction":"Time"}],"return_type":"Task","visibility":"Public","body":""}},{"html_id":"size(include_dead:Bool=true):Int64-instance-method","name":"size","abstract":true,"args":[{"name":"include_dead","default_value":"true","external_name":"include_dead","restriction":"Bool"}],"args_string":"(include_dead : Bool = true) : Int64","args_html":"(include_dead : Bool = <span class=\"n\">true</span>) : Int64","location":{"filename":"src/mosquito/backend.cr","line_number":69,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L69"},"def":{"name":"size","args":[{"name":"include_dead","default_value":"true","external_name":"include_dead","restriction":"Bool"}],"return_type":"Int64","visibility":"Public","body":""}},{"html_id":"store(key:String,value:Hash(String,String)):Nil-instance-method","name":"store","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash(String, String)"}],"args_string":"(key : String, value : Hash(String, String)) : Nil","args_html":"(key : String, value : Hash(String, String)) : Nil","location":{"filename":"src/mosquito/backend.cr","line_number":45,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L45"},"def":{"name":"store","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash(String, String)"}],"return_type":"Nil","visibility":"Public","body":"self.class.store(key, value)"}},{"html_id":"terminate(task:Task)-instance-method","name":"terminate","abstract":true,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task)","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>)","location":{"filename":"src/mosquito/backend.cr","line_number":67,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L67"},"def":{"name":"terminate","args":[{"name":"task","external_name":"task","restriction":"Task"}],"visibility":"Public","body":""}}],"types":[{"html_id":"mosquito/Mosquito/Backend/ClassMethods","path":"Mosquito/Backend/ClassMethods.html","kind":"module","full_name":"Mosquito::Backend::ClassMethods","name":"ClassMethods","abstract":false,"locations":[{"filename":"src/mosquito/backend.cr","line_number":23,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L23"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito/Backend","kind":"class","full_name":"Mosquito::Backend","name":"Backend"},"instance_methods":[{"html_id":"delete(key:String,inttl=0):Nil-instance-method","name":"delete","doc":"from task.cr","summary":"<p>from task.cr</p>","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"ttl","default_value":"0","external_name":"in","restriction":""}],"args_string":"(key : String, in ttl = 0) : Nil","args_html":"(key : String, in ttl = <span class=\"n\">0</span>) : Nil","location":{"filename":"src/mosquito/backend.cr","line_number":30,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L30"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"ttl","default_value":"0","external_name":"in","restriction":""}],"return_type":"Nil","visibility":"Public","body":""}},{"html_id":"expires_in(key:String):Int64-instance-method","name":"expires_in","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Int64","args_html":"(key : String) : Int64","location":{"filename":"src/mosquito/backend.cr","line_number":31,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L31"},"def":{"name":"expires_in","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Int64","visibility":"Public","body":""}},{"html_id":"flush:Nil-instance-method","name":"flush","abstract":true,"location":{"filename":"src/mosquito/backend.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L38"},"def":{"name":"flush","return_type":"Nil","visibility":"Public","body":""}},{"html_id":"get(key:String,field:String):String?-instance-method","name":"get","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"}],"args_string":"(key : String, field : String) : String?","args_html":"(key : String, field : String) : String?","location":{"filename":"src/mosquito/backend.cr","line_number":33,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L33"},"def":{"name":"get","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"}],"return_type":"String | ::Nil","visibility":"Public","body":""}},{"html_id":"increment(key:String,field:String,byvalue:Int32):Int64-instance-method","name":"increment","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"},{"name":"value","external_name":"by","restriction":"Int32"}],"args_string":"(key : String, field : String, by value : Int32) : Int64","args_html":"(key : String, field : String, by value : Int32) : Int64","location":{"filename":"src/mosquito/backend.cr","line_number":36,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L36"},"def":{"name":"increment","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"},{"name":"value","external_name":"by","restriction":"Int32"}],"return_type":"Int64","visibility":"Public","body":""}},{"html_id":"increment(key:String,field:String):Int64-instance-method","name":"increment","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"}],"args_string":"(key : String, field : String) : Int64","args_html":"(key : String, field : String) : Int64","location":{"filename":"src/mosquito/backend.cr","line_number":35,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L35"},"def":{"name":"increment","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"}],"return_type":"Int64","visibility":"Public","body":""}},{"html_id":"list_queues:Array(String)-instance-method","name":"list_queues","abstract":true,"location":{"filename":"src/mosquito/backend.cr","line_number":27,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L27"},"def":{"name":"list_queues","return_type":"Array(String)","visibility":"Public","body":""}},{"html_id":"retrieve(key:String):Hash(String,String)-instance-method","name":"retrieve","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Hash(String, String)","args_html":"(key : String) : Hash(String, String)","location":{"filename":"src/mosquito/backend.cr","line_number":26,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L26"},"def":{"name":"retrieve","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Hash(String, String)","visibility":"Public","body":""}},{"html_id":"set(key:String,field:String,value:String):String-instance-method","name":"set","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"args_string":"(key : String, field : String, value : String) : String","args_html":"(key : String, field : String, value : String) : String","location":{"filename":"src/mosquito/backend.cr","line_number":34,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L34"},"def":{"name":"set","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"return_type":"String","visibility":"Public","body":""}},{"html_id":"store(key:String,value:Hash(String,String)):Nil-instance-method","name":"store","doc":"from queue.cr","summary":"<p>from queue.cr</p>","abstract":true,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash(String, String)"}],"args_string":"(key : String, value : Hash(String, String)) : Nil","args_html":"(key : String, value : Hash(String, String)) : Nil","location":{"filename":"src/mosquito/backend.cr","line_number":25,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/backend.cr#L25"},"def":{"name":"store","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash(String, String)"}],"return_type":"Nil","visibility":"Public","body":""}}]}]},{"html_id":"mosquito/Mosquito/Base","path":"Mosquito/Base.html","kind":"class","full_name":"Mosquito::Base","name":"Base","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/base.cr","line_number":4,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L4"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"class_methods":[{"html_id":"job_for_type(type:String):Mosquito::Job.class-class-method","name":"job_for_type","abstract":false,"args":[{"name":"type","external_name":"type","restriction":"String"}],"args_string":"(type : String) : Mosquito::Job.class","args_html":"(type : String) : <span class=\"t\">Mosquito</span><span class=\"t\">::</span><span class=\"t\">Job</span>.<span class=\"k\">class</span>","location":{"filename":"src/mosquito/base.cr","line_number":13,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L13"},"def":{"name":"job_for_type","args":[{"name":"type","external_name":"type","restriction":"String"}],"return_type":"Mosquito::Job.class","visibility":"Public","body":"begin\n  @@mapping[type]\nrescue e : KeyError\n  error = \"Could not find a job class for type \\\"#{type}\\\", perhaps you forgot to register it?\\n\\nCurrent known types are:\\n\"\n  error = error + (@@mapping.keys.map do |k|\n    \"- #{k}\"\n  end.join(\"\\n\"))\n  error = error + \"\\n\\n\"\n  raise(KeyError.new(error))\nend"}},{"html_id":"mapping-class-method","name":"mapping","abstract":false,"location":{"filename":"src/mosquito/base.cr","line_number":5,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L5"},"def":{"name":"mapping","visibility":"Public","body":"@@mapping"}},{"html_id":"register_job(klass,*,to_run_atscheduled_time:Time)-class-method","name":"register_job","abstract":false,"args":[{"name":"klass","external_name":"klass","restriction":""},{"name":"","external_name":"","restriction":""},{"name":"scheduled_time","external_name":"to_run_at","restriction":"Time"}],"args_string":"(klass, *, to_run_at scheduled_time : Time)","args_html":"(klass, *, to_run_at scheduled_time : Time)","location":{"filename":"src/mosquito/base.cr","line_number":33,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L33"},"def":{"name":"register_job","args":[{"name":"klass","external_name":"klass","restriction":""},{"name":"","external_name":"","restriction":""},{"name":"scheduled_time","external_name":"to_run_at","restriction":"Time"}],"splat_index":1,"visibility":"Public","body":"position = @@timetable.index do\nend"}},{"html_id":"register_job_interval(klass,interval:Time::Span|Time::MonthSpan)-class-method","name":"register_job_interval","abstract":false,"args":[{"name":"klass","external_name":"klass","restriction":""},{"name":"interval","external_name":"interval","restriction":"Time::Span | Time::MonthSpan"}],"args_string":"(klass, interval : Time::Span | Time::MonthSpan)","args_html":"(klass, interval : Time::Span | Time::MonthSpan)","location":{"filename":"src/mosquito/base.cr","line_number":29,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L29"},"def":{"name":"register_job_interval","args":[{"name":"klass","external_name":"klass","restriction":""},{"name":"interval","external_name":"interval","restriction":"Time::Span | Time::MonthSpan"}],"visibility":"Public","body":"@@scheduled_tasks << (PeriodicTask.new(klass, interval))"}},{"html_id":"register_job_mapping(string,klass)-class-method","name":"register_job_mapping","abstract":false,"args":[{"name":"string","external_name":"string","restriction":""},{"name":"klass","external_name":"klass","restriction":""}],"args_string":"(string, klass)","args_html":"(string, klass)","location":{"filename":"src/mosquito/base.cr","line_number":9,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L9"},"def":{"name":"register_job_mapping","args":[{"name":"string","external_name":"string","restriction":""},{"name":"klass","external_name":"klass","restriction":""}],"visibility":"Public","body":"@@mapping[string] = klass"}},{"html_id":"scheduled_tasks-class-method","name":"scheduled_tasks","abstract":false,"location":{"filename":"src/mosquito/base.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L6"},"def":{"name":"scheduled_tasks","visibility":"Public","body":"@@scheduled_tasks"}},{"html_id":"timetable-class-method","name":"timetable","abstract":false,"location":{"filename":"src/mosquito/base.cr","line_number":7,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L7"},"def":{"name":"timetable","visibility":"Public","body":"@@timetable"}}]},{"html_id":"mosquito/Mosquito/DoubleRun","path":"Mosquito/DoubleRun.html","kind":"class","full_name":"Mosquito::DoubleRun","name":"DoubleRun","abstract":false,"superclass":{"html_id":"mosquito/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"mosquito/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/exceptions.cr","line_number":7,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/exceptions.cr#L7"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"doc":"When a task tries to run twice","summary":"<p>When a task tries to run twice</p>"},{"html_id":"mosquito/Mosquito/HabitatSettings","path":"Mosquito/HabitatSettings.html","kind":"class","full_name":"Mosquito::HabitatSettings","name":"HabitatSettings","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L6"},{"filename":"src/mosquito.cr","line_number":17,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L17"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"class_methods":[{"html_id":"backend:Mosquito::Backend.class-class-method","name":"backend","abstract":false,"def":{"name":"backend","return_type":"Mosquito::Backend.class","visibility":"Public","body":"@@backend.not_nil!"}},{"html_id":"backend=(value:Mosquito::Backend.class)-class-method","name":"backend=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Mosquito::Backend.class"}],"args_string":"(value : Mosquito::Backend.class)","args_html":"(value : <span class=\"t\">Mosquito</span><span class=\"t\">::</span><span class=\"t\">Backend</span>.<span class=\"k\">class</span>)","def":{"name":"backend=","args":[{"name":"value","external_name":"value","restriction":"Mosquito::Backend.class"}],"visibility":"Public","body":"@@backend = value"}},{"html_id":"backend?-class-method","name":"backend?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use backend in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use backend in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"backend?","visibility":"Public","body":"@@backend"}},{"html_id":"failed_job_ttl:Int32-class-method","name":"failed_job_ttl","abstract":false,"def":{"name":"failed_job_ttl","return_type":"Int32","visibility":"Public","body":"@@failed_job_ttl.not_nil!"}},{"html_id":"failed_job_ttl=(value:Int32)-class-method","name":"failed_job_ttl=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Int32"}],"args_string":"(value : Int32)","args_html":"(value : Int32)","def":{"name":"failed_job_ttl=","args":[{"name":"value","external_name":"value","restriction":"Int32"}],"visibility":"Public","body":"@@failed_job_ttl = value"}},{"html_id":"failed_job_ttl?-class-method","name":"failed_job_ttl?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use failed_job_ttl in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use failed_job_ttl in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"failed_job_ttl?","visibility":"Public","body":"@@failed_job_ttl"}},{"html_id":"idle_wait:Float64-class-method","name":"idle_wait","abstract":false,"def":{"name":"idle_wait","return_type":"Float64","visibility":"Public","body":"@@idle_wait.not_nil!"}},{"html_id":"idle_wait=(time_span:Time::Span)-class-method","name":"idle_wait=","abstract":false,"args":[{"name":"time_span","external_name":"time_span","restriction":"Time::Span"}],"args_string":"(time_span : Time::Span)","args_html":"(time_span : Time::Span)","location":{"filename":"src/mosquito.cr","line_number":18,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito.cr#L18"},"def":{"name":"idle_wait=","args":[{"name":"time_span","external_name":"time_span","restriction":"Time::Span"}],"visibility":"Public","body":"@@idle_wait = time_span.total_seconds"}},{"html_id":"idle_wait=(value:Float64)-class-method","name":"idle_wait=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Float64"}],"args_string":"(value : Float64)","args_html":"(value : Float64)","def":{"name":"idle_wait=","args":[{"name":"value","external_name":"value","restriction":"Float64"}],"visibility":"Public","body":"@@idle_wait = value"}},{"html_id":"idle_wait?-class-method","name":"idle_wait?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use idle_wait in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use idle_wait in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"idle_wait?","visibility":"Public","body":"@@idle_wait"}},{"html_id":"redis_url:String-class-method","name":"redis_url","abstract":false,"def":{"name":"redis_url","return_type":"String","visibility":"Public","body":"@@redis_url.not_nil!"}},{"html_id":"redis_url=(value:String)-class-method","name":"redis_url=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"String"}],"args_string":"(value : String)","args_html":"(value : String)","def":{"name":"redis_url=","args":[{"name":"value","external_name":"value","restriction":"String"}],"visibility":"Public","body":"@@redis_url = value"}},{"html_id":"redis_url?-class-method","name":"redis_url?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use redis_url in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use redis_url in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"redis_url?","visibility":"Public","body":"@@redis_url"}},{"html_id":"run_cron_scheduler:Bool-class-method","name":"run_cron_scheduler","abstract":false,"def":{"name":"run_cron_scheduler","return_type":"Bool","visibility":"Public","body":"@@run_cron_scheduler.not_nil!"}},{"html_id":"run_cron_scheduler=(value:Bool)-class-method","name":"run_cron_scheduler=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Bool"}],"args_string":"(value : Bool)","args_html":"(value : Bool)","def":{"name":"run_cron_scheduler=","args":[{"name":"value","external_name":"value","restriction":"Bool"}],"visibility":"Public","body":"@@run_cron_scheduler = value"}},{"html_id":"run_cron_scheduler?-class-method","name":"run_cron_scheduler?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use run_cron_scheduler in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use run_cron_scheduler in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"run_cron_scheduler?","visibility":"Public","body":"@@run_cron_scheduler"}},{"html_id":"run_from:Array(String)-class-method","name":"run_from","abstract":false,"def":{"name":"run_from","return_type":"Array(String)","visibility":"Public","body":"@@run_from.not_nil!"}},{"html_id":"run_from=(value:Array(String))-class-method","name":"run_from=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Array(String)"}],"args_string":"(value : Array(String))","args_html":"(value : Array(String))","def":{"name":"run_from=","args":[{"name":"value","external_name":"value","restriction":"Array(String)"}],"visibility":"Public","body":"@@run_from = value"}},{"html_id":"run_from?-class-method","name":"run_from?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use run_from in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use run_from in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"run_from?","visibility":"Public","body":"@@run_from"}},{"html_id":"successful_job_ttl:Int32-class-method","name":"successful_job_ttl","abstract":false,"def":{"name":"successful_job_ttl","return_type":"Int32","visibility":"Public","body":"@@successful_job_ttl.not_nil!"}},{"html_id":"successful_job_ttl=(value:Int32)-class-method","name":"successful_job_ttl=","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Int32"}],"args_string":"(value : Int32)","args_html":"(value : Int32)","def":{"name":"successful_job_ttl=","args":[{"name":"value","external_name":"value","restriction":"Int32"}],"visibility":"Public","body":"@@successful_job_ttl = value"}},{"html_id":"successful_job_ttl?-class-method","name":"successful_job_ttl?","doc":"Used for checking missing settings on non-nilable types\nIt's advised to use successful_job_ttl in your apps to ensure\nthe propper type is checked.","summary":"<p>Used for checking missing settings on non-nilable types It's advised to use successful_job_ttl in your apps to ensure the propper type is checked.</p>","abstract":false,"def":{"name":"successful_job_ttl?","visibility":"Public","body":"@@successful_job_ttl"}},{"html_id":"to_h-class-method","name":"to_h","doc":"Generates a hash using the provided values","summary":"<p>Generates a hash using the provided values</p>","abstract":false,"def":{"name":"to_h","visibility":"Public","body":"{\"redis_url\" => redis_url, \"idle_wait\" => idle_wait, \"successful_job_ttl\" => successful_job_ttl, \"failed_job_ttl\" => failed_job_ttl, \"run_cron_scheduler\" => run_cron_scheduler, \"run_from\" => run_from, \"backend\" => backend}"}}]},{"html_id":"mosquito/Mosquito/Id","path":"Mosquito/Id.html","kind":"alias","full_name":"Mosquito::Id","name":"Id","abstract":false,"locations":[{"filename":"src/mosquito/base.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/base.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":true,"aliased":"(Int32 | Int64)","aliased_html":"Int32 | Int64","const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"}},{"html_id":"mosquito/Mosquito/IrretrievableParameter","path":"Mosquito/IrretrievableParameter.html","kind":"class","full_name":"Mosquito::IrretrievableParameter","name":"IrretrievableParameter","abstract":false,"superclass":{"html_id":"mosquito/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"mosquito/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/exceptions.cr","line_number":11,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/exceptions.cr#L11"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"doc":"When a job contains a model_id parameter pointing to a database record but the database doesn't return anything for that id.","summary":"<p>When a job contains a model_id parameter pointing to a database record but the database doesn't return anything for that id.</p>"},{"html_id":"mosquito/Mosquito/Job","path":"Mosquito/Job.html","kind":"class","full_name":"Mosquito::Job","name":"Job","abstract":true,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Mosquito/Serializers/Primitives","kind":"module","full_name":"Mosquito::Serializers::Primitives","name":"Primitives"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/job.cr","line_number":11,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L11"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"Log","name":"Log","value":"Mosquito::Log.for(self)"}],"included_modules":[{"html_id":"mosquito/Mosquito/Serializers/Primitives","kind":"module","full_name":"Mosquito::Serializers::Primitives","name":"Primitives"}],"subclasses":[{"html_id":"mosquito/Mosquito/NilJob","kind":"class","full_name":"Mosquito::NilJob","name":"NilJob"},{"html_id":"mosquito/Mosquito/PeriodicJob","kind":"class","full_name":"Mosquito::PeriodicJob","name":"PeriodicJob"},{"html_id":"mosquito/Mosquito/QueuedJob","kind":"class","full_name":"Mosquito::QueuedJob","name":"QueuedJob"},{"html_id":"mosquito/Mosquito/ScheduledJob","kind":"class","full_name":"Mosquito::ScheduledJob","name":"ScheduledJob"}],"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"doc":"A Job is a definition for work to be performed.\nJobs are pieces of code which run a Task.\n\n- Jobs prevent double execution of a job for a task\n- Jobs Rescue when a #perform method fails a task for any reason\n- Jobs can be rescheduleable","summary":"<p>A Job is a definition for work to be performed.</p>","class_methods":[{"html_id":"job_type:String-class-method","name":"job_type","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":25,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L25"},"def":{"name":"job_type","return_type":"String","visibility":"Public","body":"\"\""}},{"html_id":"metadata:Metadata-class-method","name":"metadata","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":156,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L156"},"def":{"name":"metadata","return_type":"Metadata","visibility":"Public","body":"Metadata.new(metadata_key, readonly: true)"}},{"html_id":"metadata_key-class-method","name":"metadata_key","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":160,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L160"},"def":{"name":"metadata_key","visibility":"Public","body":"Mosquito.backend.build_key(\"job_metadata\", self.name.underscore)"}},{"html_id":"queue-class-method","name":"queue","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":29,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L29"},"def":{"name":"queue","visibility":"Public","body":"if job_type.blank?\n  Queue.new(\"default\")\nelse\n  Queue.new(job_type)\nend"}}],"instance_methods":[{"html_id":"after_hook-instance-method","name":"after_hook","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":64,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L64"},"def":{"name":"after_hook","visibility":"Public","body":""}},{"html_id":"before_hook-instance-method","name":"before_hook","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":60,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L60"},"def":{"name":"before_hook","visibility":"Public","body":""}},{"html_id":"executed:Bool-instance-method","name":"executed","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":20,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L20"},"def":{"name":"executed","visibility":"Public","body":"@executed"}},{"html_id":"executed?:Bool-instance-method","name":"executed?","doc":"Did the job execute?","summary":"<p>Did the job execute?</p>","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":110,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L110"},"def":{"name":"executed?","return_type":"Bool","visibility":"Public","body":"@executed"}},{"html_id":"fail-instance-method","name":"fail","doc":"To be called from inside a #perform\nMarks this job as a failure. If the job is a candidate for\nre-scheduling, it will be run again at a later time.","summary":"<p>To be called from inside a #perform Marks this job as a failure.</p>","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":105,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L105"},"def":{"name":"fail","visibility":"Public","body":"raise(JobFailed.new)"}},{"html_id":"failed?:Bool-instance-method","name":"failed?","doc":"Did the job run and fail?","summary":"<p>Did the job run and fail?</p>","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":120,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L120"},"def":{"name":"failed?","return_type":"Bool","visibility":"Public","body":"!succeeded?"}},{"html_id":"log(message)-instance-method","name":"log","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/mosquito/job.cr","line_number":16,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L16"},"def":{"name":"log","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"Log.info do\n  message\nend"}},{"html_id":"metadata:Metadata-instance-method","name":"metadata","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":150,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L150"},"def":{"name":"metadata","return_type":"Metadata","visibility":"Public","body":"@metadata || (@metadata = (Metadata.new(self.class.metadata_key)))"}},{"html_id":"perform-instance-method","name":"perform","doc":"abstract, override in a Job descendant to do something productive","summary":"<p>abstract, override in a Job descendant to do something productive</p>","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":97,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L97"},"def":{"name":"perform","visibility":"Public","body":"log(\"No job definition found for #{self.class.name}\")\nfail\n"}},{"html_id":"reschedule_interval(retry_count:Int32):Time::Span-instance-method","name":"reschedule_interval","doc":"abstract, override if desired.\n\nFor a given retry count, how long should the delay between\njob attempts be?","summary":"<p>abstract, override if desired.</p>","abstract":false,"args":[{"name":"retry_count","external_name":"retry_count","restriction":"Int32"}],"args_string":"(retry_count : Int32) : Time::Span","args_html":"(retry_count : Int32) : Time::Span","location":{"filename":"src/mosquito/job.cr","line_number":142,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L142"},"def":{"name":"reschedule_interval","args":[{"name":"retry_count","external_name":"retry_count","restriction":"Int32"}],"return_type":"Time::Span","visibility":"Public","body":"2.seconds * (retry_count ** 2)"}},{"html_id":"rescheduleable?(retry_count:Int32):Bool-instance-method","name":"rescheduleable?","doc":"abstract, override if desired.\n\nFor a given retry count, is this job rescheduleable?","summary":"<p>abstract, override if desired.</p>","abstract":false,"args":[{"name":"retry_count","external_name":"retry_count","restriction":"Int32"}],"args_string":"(retry_count : Int32) : Bool","args_html":"(retry_count : Int32) : Bool","location":{"filename":"src/mosquito/job.cr","line_number":134,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L134"},"def":{"name":"rescheduleable?","args":[{"name":"retry_count","external_name":"retry_count","restriction":"Int32"}],"return_type":"Bool","visibility":"Public","body":"rescheduleable? && retry_count < 5"}},{"html_id":"rescheduleable?:Bool-instance-method","name":"rescheduleable?","doc":"abstract, override if desired.\n\nTrue if this job is rescheduleable, false if not.","summary":"<p>abstract, override if desired.</p>","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":127,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L127"},"def":{"name":"rescheduleable?","return_type":"Bool","visibility":"Public","body":"true"}},{"html_id":"retry_later-instance-method","name":"retry_later","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":68,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L68"},"def":{"name":"retry_later","visibility":"Public","body":"fail"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":37,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L37"},"def":{"name":"run","visibility":"Public","body":"begin\n  before_hook\n  if executed\n    raise(DoubleRun.new)\n  end\n  @executed = true\n  perform\nrescue JobFailed\n  @succeeded = false\nrescue e : DoubleRun\n  raise(e)\nrescue e\n  log(\"Job failed! Raised #{e.class}: #{e.message}\")\n  e.backtrace.each do |trace|\n    log(trace)\n  end\n  @succeeded = false\nelse\n  @succeeded = true\nensure\n  after_hook\nend"}},{"html_id":"succeeded:Bool-instance-method","name":"succeeded","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":21,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L21"},"def":{"name":"succeeded","visibility":"Public","body":"@succeeded"}},{"html_id":"succeeded?:Bool-instance-method","name":"succeeded?","doc":"Did the job succeed?","summary":"<p>Did the job succeed?</p>","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":115,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L115"},"def":{"name":"succeeded?","return_type":"Bool","visibility":"Public","body":"@succeeded"}},{"html_id":"task_id:String?-instance-method","name":"task_id","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":23,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L23"},"def":{"name":"task_id","return_type":"String | ::Nil","visibility":"Public","body":"@task_id"}},{"html_id":"task_id=(task_id:String?)-instance-method","name":"task_id=","abstract":false,"args":[{"name":"task_id","external_name":"task_id","restriction":"String | ::Nil"}],"args_string":"(task_id : String?)","args_html":"(task_id : String?)","location":{"filename":"src/mosquito/job.cr","line_number":23,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L23"},"def":{"name":"task_id=","args":[{"name":"task_id","external_name":"task_id","restriction":"String | ::Nil"}],"visibility":"Public","body":"@task_id = task_id"}}],"macros":[{"html_id":"after(&block)-macro","name":"after","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":84,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L84"},"def":{"name":"after","block_arg":{"name":"block","external_name":"block","restriction":""},"visibility":"Public","body":"      def after_hook\n        \n{% if @type.methods.map(&.name).includes?((:after_hook).id) %}\n          previous_def\n        {% else %}\n          super\n        {% end %}\n\n\n        \n{{ yield }}\n\n      \nend\n    \n"}},{"html_id":"before(&block)-macro","name":"before","abstract":false,"location":{"filename":"src/mosquito/job.cr","line_number":72,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/job.cr#L72"},"def":{"name":"before","block_arg":{"name":"block","external_name":"block","restriction":""},"visibility":"Public","body":"      def before_hook\n        \n{% if @type.methods.map(&.name).includes?((:before_hook).id) %}\n          previous_def\n        {% else %}\n          super\n        {% end %}\n\n\n        \n{{ yield }}\n\n      \nend\n    \n"}}]},{"html_id":"mosquito/Mosquito/JobFailed","path":"Mosquito/JobFailed.html","kind":"class","full_name":"Mosquito::JobFailed","name":"JobFailed","abstract":false,"superclass":{"html_id":"mosquito/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"mosquito/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/exceptions.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/exceptions.cr#L3"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"doc":"When a job fails","summary":"<p>When a job fails</p>"},{"html_id":"mosquito/Mosquito/KeyBuilder","path":"Mosquito/KeyBuilder.html","kind":"class","full_name":"Mosquito::KeyBuilder","name":"KeyBuilder","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/key_builder.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/key_builder.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"KEY_SEPERATOR","name":"KEY_SEPERATOR","value":"\":\""}],"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"class_methods":[{"html_id":"build(*parts)-class-method","name":"build","abstract":false,"args":[{"name":"parts","external_name":"parts","restriction":""}],"args_string":"(*parts)","args_html":"(*parts)","location":{"filename":"src/mosquito/key_builder.cr","line_number":5,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/key_builder.cr#L5"},"def":{"name":"build","args":[{"name":"parts","external_name":"parts","restriction":""}],"splat_index":0,"visibility":"Public","body":"id = [] of String\nparts.each do |part|\n  case part\n  when Symbol\n    id << (build(part.to_s))\n  when String\n    id << part\n  when Array\n    part.each do |e|\n      id << (build(e))\n    end\n  when Tuple\n    part.to_a.each do |e|\n      id << (build(e))\n    end\n  when Number\n    id << part.to_s\n  else\n    raise(\"#{part.class} is not a keyable type\")\n  end\nend\nid.flatten.join(KEY_SEPERATOR)\n"}}]},{"html_id":"mosquito/Mosquito/Metadata","path":"Mosquito/Metadata.html","kind":"class","full_name":"Mosquito::Metadata","name":"Metadata","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/metadata.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L6"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"doc":"Provides a real-time metadata store. Data is not cached, which allows\nmultiple workers to operate on the same structures in real time.\n\nEach read or write incurs a round trip to the backend.","summary":"<p>Provides a real-time metadata store.</p>","constructors":[{"html_id":"new(root_key:String,readonly=false)-class-method","name":"new","abstract":false,"args":[{"name":"root_key","external_name":"root_key","restriction":"String"},{"name":"readonly","default_value":"false","external_name":"readonly","restriction":""}],"args_string":"(root_key : String, readonly = false)","args_html":"(root_key : String, readonly = <span class=\"n\">false</span>)","location":{"filename":"src/mosquito/metadata.cr","line_number":10,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L10"},"def":{"name":"new","args":[{"name":"root_key","external_name":"root_key","restriction":"String"},{"name":"readonly","default_value":"false","external_name":"readonly","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(root_key, readonly)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[]=(key:String,value:String)-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"args_string":"(key : String, value : String)","args_html":"(key : String, value : String)","location":{"filename":"src/mosquito/metadata.cr","line_number":21,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L21"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"visibility":"Public","body":"if readonly?\n  raise(RuntimeError.new(\"Cannot write to metadata, readonly=true\"))\nend\nMosquito.backend.set(root_key, key, value)\n"}},{"html_id":"[]?(key:String):String?-instance-method","name":"[]?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : String?","args_html":"(key : String) : String?","location":{"filename":"src/mosquito/metadata.cr","line_number":17,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L17"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"String | ::Nil","visibility":"Public","body":"Mosquito.backend.get(root_key, key)"}},{"html_id":"decrement(key)-instance-method","name":"decrement","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/mosquito/metadata.cr","line_number":36,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L36"},"def":{"name":"decrement","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"if readonly?\n  raise(RuntimeError.new(\"Cannot write to metadata, readonly=true\"))\nend\nMosquito.backend.increment(root_key, key, by: -1)\n"}},{"html_id":"increment(key,byincrement:Int32)-instance-method","name":"increment","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""},{"name":"increment","external_name":"by","restriction":"Int32"}],"args_string":"(key, by increment : Int32)","args_html":"(key, by increment : Int32)","location":{"filename":"src/mosquito/metadata.cr","line_number":31,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L31"},"def":{"name":"increment","args":[{"name":"key","external_name":"key","restriction":""},{"name":"increment","external_name":"by","restriction":"Int32"}],"visibility":"Public","body":"if readonly?\n  raise(RuntimeError.new(\"Cannot write to metadata, readonly=true\"))\nend\nMosquito.backend.increment(root_key, key, by: increment)\n"}},{"html_id":"increment(key)-instance-method","name":"increment","abstract":false,"args":[{"name":"key","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/mosquito/metadata.cr","line_number":26,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L26"},"def":{"name":"increment","args":[{"name":"key","external_name":"key","restriction":""}],"visibility":"Public","body":"if readonly?\n  raise(RuntimeError.new(\"Cannot write to metadata, readonly=true\"))\nend\nMosquito.backend.increment(root_key, key)\n"}},{"html_id":"inspect(*args,**options)-instance-method","name":"inspect","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/mosquito/metadata.cr","line_number":41,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L41"},"def":{"name":"inspect","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"to_h.inspect(*args, **options)"}},{"html_id":"inspect(*args,**options,&)-instance-method","name":"inspect","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/mosquito/metadata.cr","line_number":41,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L41"},"def":{"name":"inspect","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"visibility":"Public","body":"to_h.inspect(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"readonly?:Bool-instance-method","name":"readonly?","abstract":false,"location":{"filename":"src/mosquito/metadata.cr","line_number":8,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L8"},"def":{"name":"readonly?","return_type":"Bool","visibility":"Public","body":"@readonly"}},{"html_id":"root_key:String-instance-method","name":"root_key","abstract":false,"location":{"filename":"src/mosquito/metadata.cr","line_number":7,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L7"},"def":{"name":"root_key","return_type":"String","visibility":"Public","body":"@root_key"}},{"html_id":"root_key=(root_key:String)-instance-method","name":"root_key=","abstract":false,"args":[{"name":"root_key","external_name":"root_key","restriction":"String"}],"args_string":"(root_key : String)","args_html":"(root_key : String)","location":{"filename":"src/mosquito/metadata.cr","line_number":7,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L7"},"def":{"name":"root_key=","args":[{"name":"root_key","external_name":"root_key","restriction":"String"}],"visibility":"Public","body":"@root_key = root_key"}},{"html_id":"to_h:Hash(String,String)-instance-method","name":"to_h","abstract":false,"location":{"filename":"src/mosquito/metadata.cr","line_number":13,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L13"},"def":{"name":"to_h","return_type":"Hash(String, String)","visibility":"Public","body":"Mosquito.backend.retrieve(root_key)"}},{"html_id":"to_s(*args,**options)-instance-method","name":"to_s","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/mosquito/metadata.cr","line_number":41,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L41"},"def":{"name":"to_s","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"to_h.to_s(*args, **options)"}},{"html_id":"to_s(*args,**options,&)-instance-method","name":"to_s","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/mosquito/metadata.cr","line_number":41,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/metadata.cr#L41"},"def":{"name":"to_s","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"visibility":"Public","body":"to_h.to_s(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}}]},{"html_id":"mosquito/Mosquito/NilJob","path":"Mosquito/NilJob.html","kind":"class","full_name":"Mosquito::NilJob","name":"NilJob","abstract":false,"superclass":{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"},"ancestors":[{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"},{"html_id":"mosquito/Mosquito/Serializers/Primitives","kind":"module","full_name":"Mosquito::Serializers::Primitives","name":"Primitives"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/nil_job.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/nil_job.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/mosquito/nil_job.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/nil_job.cr#L3"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}]},{"html_id":"mosquito/Mosquito/PeriodicJob","path":"Mosquito/PeriodicJob.html","kind":"class","full_name":"Mosquito::PeriodicJob","name":"PeriodicJob","abstract":true,"superclass":{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"},"ancestors":[{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"},{"html_id":"mosquito/Mosquito/Serializers/Primitives","kind":"module","full_name":"Mosquito::Serializers::Primitives","name":"Primitives"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/periodic_job.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_job.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/mosquito/periodic_job.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_job.cr#L3"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"build_task-instance-method","name":"build_task","abstract":true,"location":{"filename":"src/mosquito/periodic_job.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_job.cr#L6"},"def":{"name":"build_task","visibility":"Public","body":""}},{"html_id":"rescheduleable?-instance-method","name":"rescheduleable?","doc":"abstract, override if desired.\n\nTrue if this job is rescheduleable, false if not.","summary":"<p>abstract, override if desired.</p>","abstract":false,"location":{"filename":"src/mosquito/periodic_job.cr","line_number":28,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_job.cr#L28"},"def":{"name":"rescheduleable?","visibility":"Public","body":"false"}}]},{"html_id":"mosquito/Mosquito/PeriodicTask","path":"Mosquito/PeriodicTask.html","kind":"class","full_name":"Mosquito::PeriodicTask","name":"PeriodicTask","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/periodic_task.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"constructors":[{"html_id":"new(class__arg0,interval)-class-method","name":"new","abstract":false,"args":[{"name":"__arg0","external_name":"class","restriction":""},{"name":"interval","external_name":"interval","restriction":""}],"args_string":"(class __arg0, interval)","args_html":"(class __arg0, interval)","location":{"filename":"src/mosquito/periodic_task.cr","line_number":7,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L7"},"def":{"name":"new","args":[{"name":"__arg0","external_name":"class","restriction":""},{"name":"interval","external_name":"interval","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(__arg0, interval)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"class:Mosquito::PeriodicJob.class-instance-method","name":"class","doc":"Returns the **runtime** `Class` of an object.\n\n```\n1.class       # => Int32\n\"hello\".class # => String\n```\n\nCompare it with `typeof`, which returns the **compile-time** type of an object:\n\n```\nrandom_value = rand # => 0.627423\nvalue = random_value < 0.5 ? 1 : \"hello\"\nvalue         # => \"hello\"\nvalue.class   # => String\ntypeof(value) # => Int32 | String\n```","summary":"<p>Returns the <strong>runtime</strong> <code>Class</code> of an object.</p>","abstract":false,"location":{"filename":"src/mosquito/periodic_task.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L3"},"def":{"name":"class","return_type":"Mosquito::PeriodicJob.class","visibility":"Public","body":"@class"}},{"html_id":"class=(class__arg0:Mosquito::PeriodicJob.class)-instance-method","name":"class=","abstract":false,"args":[{"name":"__arg0","external_name":"class","restriction":"Mosquito::PeriodicJob.class"}],"args_string":"(class __arg0 : Mosquito::PeriodicJob.class)","args_html":"(class __arg0 : <span class=\"t\">Mosquito</span><span class=\"t\">::</span><span class=\"t\">PeriodicJob</span>.<span class=\"k\">class</span>)","location":{"filename":"src/mosquito/periodic_task.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L3"},"def":{"name":"class=","args":[{"name":"__arg0","external_name":"class","restriction":"Mosquito::PeriodicJob.class"}],"visibility":"Public","body":"@class = __arg0"}},{"html_id":"execute-instance-method","name":"execute","abstract":false,"location":{"filename":"src/mosquito/periodic_task.cr","line_number":20,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L20"},"def":{"name":"execute","visibility":"Public","body":"job = @class.new\ntask = job.build_task\ntask.store\n@class.queue.enqueue(task)\n"}},{"html_id":"interval:Time::Span|Time::MonthSpan-instance-method","name":"interval","abstract":false,"location":{"filename":"src/mosquito/periodic_task.cr","line_number":4,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L4"},"def":{"name":"interval","return_type":"Time::Span | Time::MonthSpan","visibility":"Public","body":"@interval"}},{"html_id":"interval=(interval:Time::Span|Time::MonthSpan)-instance-method","name":"interval=","abstract":false,"args":[{"name":"interval","external_name":"interval","restriction":"Time::Span | Time::MonthSpan"}],"args_string":"(interval : Time::Span | Time::MonthSpan)","args_html":"(interval : Time::Span | Time::MonthSpan)","location":{"filename":"src/mosquito/periodic_task.cr","line_number":4,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L4"},"def":{"name":"interval=","args":[{"name":"interval","external_name":"interval","restriction":"Time::Span | Time::MonthSpan"}],"visibility":"Public","body":"@interval = interval"}},{"html_id":"last_executed_at:Time-instance-method","name":"last_executed_at","abstract":false,"location":{"filename":"src/mosquito/periodic_task.cr","line_number":5,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L5"},"def":{"name":"last_executed_at","return_type":"Time","visibility":"Public","body":"@last_executed_at"}},{"html_id":"last_executed_at=(last_executed_at:Time)-instance-method","name":"last_executed_at=","abstract":false,"args":[{"name":"last_executed_at","external_name":"last_executed_at","restriction":"Time"}],"args_string":"(last_executed_at : Time)","args_html":"(last_executed_at : Time)","location":{"filename":"src/mosquito/periodic_task.cr","line_number":5,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L5"},"def":{"name":"last_executed_at=","args":[{"name":"last_executed_at","external_name":"last_executed_at","restriction":"Time"}],"visibility":"Public","body":"@last_executed_at = last_executed_at"}},{"html_id":"try_to_execute:Nil-instance-method","name":"try_to_execute","abstract":false,"location":{"filename":"src/mosquito/periodic_task.cr","line_number":11,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/periodic_task.cr#L11"},"def":{"name":"try_to_execute","return_type":"Nil","visibility":"Public","body":"now = Time.utc\nif (last_executed_at + interval) <= now\n  execute\n  @last_executed_at = now\nend\n"}}]},{"html_id":"mosquito/Mosquito/Queue","path":"Mosquito/Queue.html","kind":"class","full_name":"Mosquito::Queue","name":"Queue","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/queue.cr","line_number":77,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L77"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"doc":"A named Queue.\n\nNamed Queues exist and have 4 ordered lists: waiting, pending, scheduled, and dead.\n\n- The Waiting list is for jobs which need to be executed as soon as possible.\n- The Pending list is for jobs which are currently being executed.\n- The Scheduled list is indexed by execution time and holds jobs which need to be executed at a later time.\n- The Dead list is for jobs which have been retried too many times and are no longer viable.\n\nA task is represented in a queue by its id.\n\nA task flows through the queues in this manner:\n\n\n```text\n Time=0: Task does not exist yet, lists are empty\n\n   Waiting  Pending  Scheduled    Dead\n\n ---------------------------------\n Time=1: Task is enqueued\n\n   Waiting  Pending  Scheduled    Dead\n    Task#1\n\n ---------------------------------\n Time=2: Task begins running. Task is moved to pending and executed\n\n   Waiting  Pending  Scheduled    Dead\n             Task#1\n\n ---------------------------------\n Time=3: Tasks are Enqueued.\n\n   Waiting  Pending  Scheduled    Dead\n    Task#2   Task#1\n    Task#3\n\n ---------------------------------\n Time=4: Task succeeds, next task begins.\n\n   Waiting  Pending  Scheduled    Dead\n    Task#3   Task#2\n\n ---------------------------------\n Time=5: Task fails and is scheduled for later, next task begins.\n\n   Waiting  Pending  Scheduled     Dead\n             Task#3  t=7:Task#2\n\n ---------------------------------\n Time=6: Task succeeds. Nothing is executing.\n\n   Waiting  Pending  Scheduled     Dead\n                     t=7:Task#2\n\n ---------------------------------\n Time=7: Scheduled task is due and is moved to waiting. Nothing is executing.\n\n   Waiting  Pending  Scheduled     Dead\n    Task#2\n\n ---------------------------------\n Time=8: Task begins executing (for the second time).\n\n   Waiting  Pending  Scheduled     Dead\n             Task#2\n\n ---------------------------------\n Time=9: Task finished successfully. No more tasks present.\n\n   Waiting  Pending  Scheduled     Dead\n\n```\n","summary":"<p>A named Queue.</p>","constructors":[{"html_id":"new(name:String)-class-method","name":"new","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String)","args_html":"(name : String)","location":{"filename":"src/mosquito/queue.cr","line_number":82,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L82"},"def":{"name":"new","args":[{"name":"name","external_name":"name","restriction":"String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(name)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"==(other:self):Bool-instance-method","name":"==","doc":"Returns `true` if this reference is the same as *other*. Invokes `same?`.","summary":"<p>Returns <code>true</code> if this reference is the same as <em>other</em>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"self"}],"args_string":"(other : self) : Bool","args_html":"(other : <span class=\"k\">self</span>) : Bool","location":{"filename":"src/mosquito/queue.cr","line_number":138,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L138"},"def":{"name":"==","args":[{"name":"other","external_name":"other","restriction":"self"}],"return_type":"Bool","visibility":"Public","body":"name == other.name"}},{"html_id":"backend:Mosquito::Backend-instance-method","name":"backend","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":80,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L80"},"def":{"name":"backend","return_type":"Mosquito::Backend","visibility":"Public","body":"@backend"}},{"html_id":"backend=(backend:Mosquito::Backend)-instance-method","name":"backend=","abstract":false,"args":[{"name":"backend","external_name":"backend","restriction":"Mosquito::Backend"}],"args_string":"(backend : Mosquito::Backend)","args_html":"(backend : <a href=\"../Mosquito/Backend.html\">Mosquito::Backend</a>)","location":{"filename":"src/mosquito/queue.cr","line_number":80,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L80"},"def":{"name":"backend=","args":[{"name":"backend","external_name":"backend","restriction":"Mosquito::Backend"}],"visibility":"Public","body":"@backend = backend"}},{"html_id":"banish(task:Task)-instance-method","name":"banish","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task)","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>)","location":{"filename":"src/mosquito/queue.cr","line_number":124,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L124"},"def":{"name":"banish","args":[{"name":"task","external_name":"task","restriction":"Task"}],"visibility":"Public","body":"backend.finish(task)\nbackend.terminate(task)\n"}},{"html_id":"config_key:String-instance-method","name":"config_key","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":78,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L78"},"def":{"name":"config_key","visibility":"Public","body":"@config_key"}},{"html_id":"dequeue:Task?-instance-method","name":"dequeue","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":100,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L100"},"def":{"name":"dequeue","return_type":"Task | ::Nil","visibility":"Public","body":"if empty?\n  return\nend\nif task = backend.dequeue\n  task\nelse\n  @empty = true\n  nil\nend\n"}},{"html_id":"dequeue_scheduled:Array(Task)-instance-method","name":"dequeue_scheduled","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":116,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L116"},"def":{"name":"dequeue_scheduled","return_type":"Array(Task)","visibility":"Public","body":"backend.deschedule"}},{"html_id":"empty?:Bool-instance-method","name":"empty?","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":79,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L79"},"def":{"name":"empty?","return_type":"Bool","visibility":"Public","body":"@empty"}},{"html_id":"enqueue(task:Task,ininterval:Time::Span):Task-instance-method","name":"enqueue","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"interval","external_name":"in","restriction":"Time::Span"}],"args_string":"(task : Task, in interval : Time::Span) : Task","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>, in interval : Time::Span) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/queue.cr","line_number":92,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L92"},"def":{"name":"enqueue","args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"interval","external_name":"in","restriction":"Time::Span"}],"return_type":"Task","visibility":"Public","body":"enqueue(task, at: interval.from_now)"}},{"html_id":"enqueue(task:Task,atexecute_time:Time):Task-instance-method","name":"enqueue","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"execute_time","external_name":"at","restriction":"Time"}],"args_string":"(task : Task, at execute_time : Time) : Task","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>, at execute_time : Time) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/queue.cr","line_number":96,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L96"},"def":{"name":"enqueue","args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"execute_time","external_name":"at","restriction":"Time"}],"return_type":"Task","visibility":"Public","body":"backend.schedule(task, execute_time)"}},{"html_id":"enqueue(task:Task):Task-instance-method","name":"enqueue","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task) : Task","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/queue.cr","line_number":88,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L88"},"def":{"name":"enqueue","args":[{"name":"task","external_name":"task","restriction":"Task"}],"return_type":"Task","visibility":"Public","body":"backend.enqueue(task)"}},{"html_id":"flush-instance-method","name":"flush","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":142,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L142"},"def":{"name":"flush","visibility":"Public","body":"backend.flush"}},{"html_id":"forget(task:Task)-instance-method","name":"forget","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task)","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>)","location":{"filename":"src/mosquito/queue.cr","line_number":120,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L120"},"def":{"name":"forget","args":[{"name":"task","external_name":"task","restriction":"Task"}],"visibility":"Public","body":"backend.finish(task)"}},{"html_id":"length:Int64-instance-method","name":"length","summary":"<p><span class=\"flag red\">DEPRECATED</span>  see #size</p>","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":134,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L134"},"def":{"name":"length","return_type":"Int64","visibility":"Public","body":"backend.size"}},{"html_id":"name:String-instance-method","name":"name","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":78,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L78"},"def":{"name":"name","visibility":"Public","body":"@name"}},{"html_id":"reschedule(task:Task,execution_time)-instance-method","name":"reschedule","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"execution_time","external_name":"execution_time","restriction":""}],"args_string":"(task : Task, execution_time)","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>, execution_time)","location":{"filename":"src/mosquito/queue.cr","line_number":111,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L111"},"def":{"name":"reschedule","args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"execution_time","external_name":"execution_time","restriction":""}],"visibility":"Public","body":"backend.finish(task)\nenqueue(task, at: execution_time)\n"}},{"html_id":"size:Int64-instance-method","name":"size","abstract":false,"location":{"filename":"src/mosquito/queue.cr","line_number":129,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queue.cr#L129"},"def":{"name":"size","return_type":"Int64","visibility":"Public","body":"backend.size"}}]},{"html_id":"mosquito/Mosquito/QueuedJob","path":"Mosquito/QueuedJob.html","kind":"class","full_name":"Mosquito::QueuedJob","name":"QueuedJob","abstract":true,"superclass":{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"},"ancestors":[{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"},{"html_id":"mosquito/Mosquito/Serializers/Primitives","kind":"module","full_name":"Mosquito::Serializers::Primitives","name":"Primitives"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/queued_job.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queued_job.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"instance_methods":[{"html_id":"enqueue(indelay_interval:Time::Span):Task-instance-method","name":"enqueue","abstract":false,"args":[{"name":"delay_interval","external_name":"in","restriction":"Time::Span"}],"args_string":"(in delay_interval : Time::Span) : Task","args_html":"(in delay_interval : Time::Span) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/queued_job.cr","line_number":121,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queued_job.cr#L121"},"def":{"name":"enqueue","args":[{"name":"delay_interval","external_name":"in","restriction":"Time::Span"}],"return_type":"Task","visibility":"Public","body":"build_task.tap do |task|\n  task.store\n  self.class.queue.enqueue(task, in: delay_interval)\nend"}},{"html_id":"enqueue(atexecute_time:Time):Task-instance-method","name":"enqueue","abstract":false,"args":[{"name":"execute_time","external_name":"at","restriction":"Time"}],"args_string":"(at execute_time : Time) : Task","args_html":"(at execute_time : Time) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/queued_job.cr","line_number":128,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queued_job.cr#L128"},"def":{"name":"enqueue","args":[{"name":"execute_time","external_name":"at","restriction":"Time"}],"return_type":"Task","visibility":"Public","body":"build_task.tap do |task|\n  task.store\n  self.class.queue.enqueue(task, at: execute_time)\nend"}},{"html_id":"enqueue:Task-instance-method","name":"enqueue","abstract":false,"location":{"filename":"src/mosquito/queued_job.cr","line_number":114,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/queued_job.cr#L114"},"def":{"name":"enqueue","return_type":"Task","visibility":"Public","body":"build_task.tap do |task|\n  task.store\n  self.class.queue.enqueue(task)\nend"}}]},{"html_id":"mosquito/Mosquito/RateLimiter","path":"Mosquito/RateLimiter.html","kind":"module","full_name":"Mosquito::RateLimiter","name":"RateLimiter","abstract":false,"locations":[{"filename":"src/mosquito/rate_limiter.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L1"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"instance_methods":[{"html_id":"increment_run_count:Nil-instance-method","name":"increment_run_count","doc":"Increments the run counter.","summary":"<p>Increments the run counter.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":134,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L134"},"def":{"name":"increment_run_count","return_type":"Nil","visibility":"Public","body":"metadata.increment(\"run_count\", by: increment_run_count_by)"}},{"html_id":"increment_run_count_by:Int32-instance-method","name":"increment_run_count_by","doc":"How much the run counter should be incremented by.\nImplemented as a dynamic method so that it can easily be calculated by\nsome other metric, eg api calls to a third party library.","summary":"<p>How much the run counter should be incremented by.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":141,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L141"},"def":{"name":"increment_run_count_by","return_type":"Int32","visibility":"Public","body":"@@rate_limit_increment"}},{"html_id":"maxed_rate_for_window?:Bool-instance-method","name":"maxed_rate_for_window?","doc":"Has the run count exceeded the ceiling for the current window?","summary":"<p>Has the run count exceeded the ceiling for the current window?</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":97,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L97"},"def":{"name":"maxed_rate_for_window?","return_type":"Bool","visibility":"Public","body":"run_count = metadata[\"run_count\"]?.try(&.to_i)\nrun_count || (run_count = 0)\nrun_count >= @@rate_limit_ceiling\n"}},{"html_id":"metadata:Metadata-instance-method","name":"metadata","doc":"Storage hash for rate limit data.","summary":"<p>Storage hash for rate limit data.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":84,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L84"},"def":{"name":"metadata","return_type":"Metadata","visibility":"Public","body":"@rl_metadata || (@rl_metadata = self.class.metadata)"}},{"html_id":"rate_limited?:Bool-instance-method","name":"rate_limited?","doc":"Should this job be cancelled?\nIf not, update the rate limit metadata.","summary":"<p>Should this job be cancelled? If not, update the rate limit metadata.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":90,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L90"},"def":{"name":"rate_limited?","return_type":"Bool","visibility":"Public","body":"if @@rate_limit_ceiling < 0\n  return false\nend\nif maxed_rate_for_window?\n  return true\nend\nfalse\n"}},{"html_id":"reschedule_interval(retry_count:Int32):Time::Span-instance-method","name":"reschedule_interval","doc":"Configure the reschedule interval so that the task is not run again until it\nshould be allowed through the rate limiter.","summary":"<p>Configure the reschedule interval so that the task is not run again until it should be allowed through the rate limiter.</p>","abstract":false,"args":[{"name":"retry_count","external_name":"retry_count","restriction":"Int32"}],"args_string":"(retry_count : Int32) : Time::Span","args_html":"(retry_count : Int32) : Time::Span","location":{"filename":"src/mosquito/rate_limiter.cr","line_number":147,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L147"},"def":{"name":"reschedule_interval","args":[{"name":"retry_count","external_name":"retry_count","restriction":"Int32"}],"return_type":"Time::Span","visibility":"Public","body":"if rate_limited? && (window_expiration = window_expires_at)\n  next_window = window_expiration - Time.utc\n  log(\"Rate limited: will run again in #{next_window}\")\n  next_window\nelse\n  super(retry_count)\nend"}},{"html_id":"rescheduleable?(retry_count:Int32):Bool-instance-method","name":"rescheduleable?","doc":"Configure the rescheduler to always retry if a job is rate limited.","summary":"<p>Configure the rescheduler to always retry if a job is rate limited.</p>","abstract":false,"args":[{"name":"retry_count","external_name":"retry_count","restriction":"Int32"}],"args_string":"(retry_count : Int32) : Bool","args_html":"(retry_count : Int32) : Bool","location":{"filename":"src/mosquito/rate_limiter.cr","line_number":158,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L158"},"def":{"name":"rescheduleable?","args":[{"name":"retry_count","external_name":"retry_count","restriction":"Int32"}],"return_type":"Bool","visibility":"Public","body":"if rate_limited?\n  true\nelse\n  super(retry_count)\nend"}},{"html_id":"update_window_start:Nil-instance-method","name":"update_window_start","doc":"Resets the run count and logs the start of window.","summary":"<p>Resets the run count and logs the start of window.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":124,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L124"},"def":{"name":"update_window_start","return_type":"Nil","visibility":"Public","body":"started_window = window_start || Time::UNIX_EPOCH\nnow = Time.utc\nif (now - started_window) > @@rate_limit_interval\n  metadata[\"window_start\"] = now.to_unix.to_s\n  metadata[\"run_count\"] = \"0\"\nend\n"}},{"html_id":"window_expires_at:Time?-instance-method","name":"window_expires_at","doc":"When does the current rate limit window expire?\nReturns nil if the window is already expired.","summary":"<p>When does the current rate limit window expire? Returns nil if the window is already expired.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":112,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L112"},"def":{"name":"window_expires_at","return_type":"Time | ::Nil","visibility":"Public","body":"if started_window = window_start\nelse\n  return nil\nend\nexpiration_time = started_window + @@rate_limit_interval\nif expiration_time < Time.utc\n  nil\nelse\n  expiration_time\nend\n"}},{"html_id":"window_start:Time?-instance-method","name":"window_start","doc":"Calculates the start of the rate limit window.","summary":"<p>Calculates the start of the rate limit window.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":104,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L104"},"def":{"name":"window_start","return_type":"Time | ::Nil","visibility":"Public","body":"if start_time = metadata[\"window_start\"]?.try(&.to_i)\n  Time.unix(start_time)\nend"}}],"types":[{"html_id":"mosquito/Mosquito/RateLimiter/ClassMethods","path":"Mosquito/RateLimiter/ClassMethods.html","kind":"module","full_name":"Mosquito::RateLimiter::ClassMethods","name":"ClassMethods","abstract":false,"locations":[{"filename":"src/mosquito/rate_limiter.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito/RateLimiter","kind":"module","full_name":"Mosquito::RateLimiter","name":"RateLimiter"},"instance_methods":[{"html_id":"metadata:Metadata-instance-method","name":"metadata","doc":"Provides an instance of the metadata store used to track rate limit\nstats.","summary":"<p>Provides an instance of the metadata store used to track rate limit stats.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":53,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L53"},"def":{"name":"metadata","return_type":"Metadata","visibility":"Public","body":"Metadata.new(@@rate_limit_key)"}},{"html_id":"rate_limit_key-instance-method","name":"rate_limit_key","doc":"Resolves the key used to index the metadata store for this test.","summary":"<p>Resolves the key used to index the metadata store for this test.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":58,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L58"},"def":{"name":"rate_limit_key","visibility":"Public","body":"@@rate_limit_key"}},{"html_id":"rate_limit_stats:NamedTuple-instance-method","name":"rate_limit_stats","doc":"Statistics about the rate limiter, including both the configuration\nparameters and the run counts.","summary":"<p>Statistics about the rate limiter, including both the configuration parameters and the run counts.</p>","abstract":false,"location":{"filename":"src/mosquito/rate_limiter.cr","line_number":26,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L26"},"def":{"name":"rate_limit_stats","return_type":"NamedTuple","visibility":"Public","body":"meta = metadata\nwindow_start = if window_start_ = meta[\"window_start\"]?\n  Time.unix(window_start_.to_i)\nelse\n  Time::UNIX_EPOCH\nend\nrun_count = if run_count_ = meta[\"run_count\"]?\n  run_count_.to_i\nelse\n  0\nend\n{interval: @@rate_limit_interval, key: @@rate_limit_key, increment: @@rate_limit_increment, limit: @@rate_limit_ceiling, window_start: window_start, run_count: run_count}\n"}},{"html_id":"throttle(*,limit:Int32=1,per:Time::Span=1.second,increment=1,key=self.name.underscore)-instance-method","name":"throttle","doc":"Configures rate limiting for this job.\n\n`limit` and `per` are used to control the run count and the window\nduration. Defaults to a limit of 1 run per second.\n\n`increment` is used to indicate how many \"hits\" against a single job is\nworth. Defaults to 1.\n\n`key` is used to combine rate limiting functions across multiple jobs.","summary":"<p>Configures rate limiting for this job.</p>","abstract":false,"args":[{"name":"","external_name":"","restriction":""},{"name":"limit","default_value":"1","external_name":"limit","restriction":"Int32"},{"name":"per","default_value":"1.second","external_name":"per","restriction":"Time::Span"},{"name":"increment","default_value":"1","external_name":"increment","restriction":""},{"name":"key","default_value":"self.name.underscore","external_name":"key","restriction":""}],"args_string":"(*, limit : Int32 = 1, per : Time::Span = 1.second, increment = 1, key = self.name.underscore)","args_html":"(*, limit : Int32 = <span class=\"n\">1</span>, per : Time::Span = <span class=\"n\">1</span>.second, increment = <span class=\"n\">1</span>, key = <span class=\"k\">self</span>.name.underscore)","location":{"filename":"src/mosquito/rate_limiter.cr","line_number":12,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/rate_limiter.cr#L12"},"def":{"name":"throttle","args":[{"name":"","external_name":"","restriction":""},{"name":"limit","default_value":"1","external_name":"limit","restriction":"Int32"},{"name":"per","default_value":"1.second","external_name":"per","restriction":"Time::Span"},{"name":"increment","default_value":"1","external_name":"increment","restriction":""},{"name":"key","default_value":"self.name.underscore","external_name":"key","restriction":""}],"splat_index":0,"visibility":"Public","body":"@@rate_limit_ceiling = limit\n@@rate_limit_interval = per\n@@rate_limit_key = Mosquito.backend.build_key(\"rate_limit\", key)\n@@rate_limit_increment = increment\n"}}]}]},{"html_id":"mosquito/Mosquito/Redis","path":"Mosquito/Redis.html","kind":"class","full_name":"Mosquito::Redis","name":"Redis","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/redis.cr","line_number":4,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis.cr#L4"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"class_methods":[{"html_id":"instance-class-method","name":"instance","abstract":false,"location":{"filename":"src/mosquito/redis.cr","line_number":5,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis.cr#L5"},"def":{"name":"instance","visibility":"Public","body":"@@instance || (@@instance = new)"}},{"html_id":"key(*parts)-class-method","name":"key","abstract":false,"args":[{"name":"parts","external_name":"parts","restriction":""}],"args_string":"(*parts)","args_html":"(*parts)","location":{"filename":"src/mosquito/redis.cr","line_number":15,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis.cr#L15"},"def":{"name":"key","args":[{"name":"parts","external_name":"parts","restriction":""}],"splat_index":0,"visibility":"Public","body":"KeyBuilder.build(*parts)"}}],"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/mosquito/redis.cr","line_number":9,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis.cr#L9"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"retrieve_hash(name:String):Hash(String,String)-instance-method","name":"retrieve_hash","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"}],"args_string":"(name : String) : Hash(String, String)","args_html":"(name : String) : Hash(String, String)","location":{"filename":"src/mosquito/redis.cr","line_number":23,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis.cr#L23"},"def":{"name":"retrieve_hash","args":[{"name":"name","external_name":"name","restriction":"String"}],"return_type":"Hash(String, String)","visibility":"Public","body":"hgetall(name)"}},{"html_id":"store_hash(name:String,hash:Hash(String,String))-instance-method","name":"store_hash","abstract":false,"args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"hash","external_name":"hash","restriction":"Hash(String, String)"}],"args_string":"(name : String, hash : Hash(String, String))","args_html":"(name : String, hash : Hash(String, String))","location":{"filename":"src/mosquito/redis.cr","line_number":19,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis.cr#L19"},"def":{"name":"store_hash","args":[{"name":"name","external_name":"name","restriction":"String"},{"name":"hash","external_name":"hash","restriction":"Hash(String, String)"}],"visibility":"Public","body":"hset(name, hash)"}}],"macros":[{"html_id":"method_missing(call)-macro","name":"method_missing","abstract":false,"args":[{"name":"call","external_name":"call","restriction":""}],"args_string":"(call)","args_html":"(call)","location":{"filename":"src/mosquito/redis.cr","line_number":27,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis.cr#L27"},"def":{"name":"method_missing","args":[{"name":"call","external_name":"call","restriction":""}],"visibility":"Public","body":"      @connection.\n{{ call }}\n\n    \n"}}]},{"html_id":"mosquito/Mosquito/RedisBackend","path":"Mosquito/RedisBackend.html","kind":"class","full_name":"Mosquito::RedisBackend","name":"RedisBackend","abstract":false,"superclass":{"html_id":"mosquito/Mosquito/Backend","kind":"class","full_name":"Mosquito::Backend","name":"Backend"},"ancestors":[{"html_id":"mosquito/Mosquito/Backend","kind":"class","full_name":"Mosquito::Backend","name":"Backend"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/redis_backend.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"QUEUES","name":"QUEUES","value":"[\"waiting\", \"scheduled\", \"pending\", \"dead\"] of ::String"}],"extended_modules":[{"html_id":"mosquito/Mosquito/Backend/ClassMethods","kind":"module","full_name":"Mosquito::Backend::ClassMethods","name":"ClassMethods"}],"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"class_methods":[{"html_id":"delete(key:String,inttl=0):Nil-class-method","name":"delete","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"ttl","default_value":"0","external_name":"in","restriction":""}],"args_string":"(key : String, in ttl = 0) : Nil","args_html":"(key : String, in ttl = <span class=\"n\">0</span>) : Nil","location":{"filename":"src/mosquito/redis_backend.cr","line_number":29,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L29"},"def":{"name":"delete","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"ttl","default_value":"0","external_name":"in","restriction":""}],"return_type":"Nil","visibility":"Public","body":"if (ttl > 0)\n  redis.expire(key, ttl)\nelse\n  redis.del(key)\nend"}},{"html_id":"expires_in(key:String):Int64-class-method","name":"expires_in","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Int64","args_html":"(key : String) : Int64","location":{"filename":"src/mosquito/redis_backend.cr","line_number":54,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L54"},"def":{"name":"expires_in","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Int64","visibility":"Public","body":"redis.ttl(key)"}},{"html_id":"flush:Nil-class-method","name":"flush","doc":"is this even a good idea?","summary":"<p>is this even a good idea?</p>","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":73,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L73"},"def":{"name":"flush","return_type":"Nil","visibility":"Public","body":"redis.flushall"}},{"html_id":"get(key:String,field:String):String?-class-method","name":"get","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"}],"args_string":"(key : String, field : String) : String?","args_html":"(key : String, field : String) : String?","location":{"filename":"src/mosquito/redis_backend.cr","line_number":37,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L37"},"def":{"name":"get","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"}],"return_type":"String | ::Nil","visibility":"Public","body":"redis.hget(key, field)"}},{"html_id":"increment(key:String,field:String,byvalue:Int32):Int64-class-method","name":"increment","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"},{"name":"value","external_name":"by","restriction":"Int32"}],"args_string":"(key : String, field : String, by value : Int32) : Int64","args_html":"(key : String, field : String, by value : Int32) : Int64","location":{"filename":"src/mosquito/redis_backend.cr","line_number":50,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L50"},"def":{"name":"increment","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"},{"name":"value","external_name":"by","restriction":"Int32"}],"return_type":"Int64","visibility":"Public","body":"redis.hincrby(key, field, value)"}},{"html_id":"increment(key:String,field:String):Int64-class-method","name":"increment","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"}],"args_string":"(key : String, field : String) : Int64","args_html":"(key : String, field : String) : Int64","location":{"filename":"src/mosquito/redis_backend.cr","line_number":46,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L46"},"def":{"name":"increment","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"}],"return_type":"Int64","visibility":"Public","body":"increment(key, field, by: 1)"}},{"html_id":"list_queues:Array(String)-class-method","name":"list_queues","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":58,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L58"},"def":{"name":"list_queues","return_type":"Array(String)","visibility":"Public","body":"search_queue_prefixes = QUEUES.first(2)\nsearch_queue_prefixes.map do |search_queue|\n  key = build_key(search_queue, \"*\")\n  long_names = redis.keys(key)\n  queue_prefix = (build_key(search_queue)) + \":\"\n  long_names.map(&.to_s).map do |long_name|\n    long_name.sub(queue_prefix, \"\")\n  end\nend.uniq.flatten\n"}},{"html_id":"redis-class-method","name":"redis","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":11,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L11"},"def":{"name":"redis","visibility":"Public","body":"Mosquito::Redis.instance"}},{"html_id":"retrieve(key:String):Hash(String,String)-class-method","name":"retrieve","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"}],"args_string":"(key : String) : Hash(String, String)","args_html":"(key : String) : Hash(String, String)","location":{"filename":"src/mosquito/redis_backend.cr","line_number":25,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L25"},"def":{"name":"retrieve","args":[{"name":"key","external_name":"key","restriction":"String"}],"return_type":"Hash(String, String)","visibility":"Public","body":"redis.hgetall(key)"}},{"html_id":"set(key:String,field:String,value:String):String-class-method","name":"set","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"args_string":"(key : String, field : String, value : String) : String","args_html":"(key : String, field : String, value : String) : String","location":{"filename":"src/mosquito/redis_backend.cr","line_number":41,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L41"},"def":{"name":"set","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"field","external_name":"field","restriction":"String"},{"name":"value","external_name":"value","restriction":"String"}],"return_type":"String","visibility":"Public","body":"redis.hset(key, field, value)\nvalue\n"}},{"html_id":"store(key:String,value:Hash(String,String)):Nil-class-method","name":"store","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash(String, String)"}],"args_string":"(key : String, value : Hash(String, String)) : Nil","args_html":"(key : String, value : Hash(String, String)) : Nil","location":{"filename":"src/mosquito/redis_backend.cr","line_number":21,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L21"},"def":{"name":"store","args":[{"name":"key","external_name":"key","restriction":"String"},{"name":"value","external_name":"value","restriction":"Hash(String, String)"}],"return_type":"Nil","visibility":"Public","body":"redis.hset(key, value)"}}],"instance_methods":[{"html_id":"dead_q-instance-method","name":"dead_q","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":15,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L15"},"def":{"name":"dead_q","visibility":"Public","body":"build_key(\"dead\", name)"}},{"html_id":"dequeue:Task?-instance-method","name":"dequeue","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":99,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L99"},"def":{"name":"dequeue","return_type":"Task | ::Nil","visibility":"Public","body":"if id = redis.rpoplpush(waiting_q, pending_q)\n  Task.retrieve(id)\nend"}},{"html_id":"deschedule:Array(Task)-instance-method","name":"deschedule","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":82,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L82"},"def":{"name":"deschedule","return_type":"Array(Task)","visibility":"Public","body":"time = Time.utc\noverdue_tasks = redis.zrangebyscore(scheduled_q, 0, time.to_unix_ms)\nif overdue_tasks.any?\nelse\n  return [] of Task\nend\noverdue_tasks.compact_map do |task_id|\n  redis.zrem(scheduled_q, task_id)\n  Task.retrieve(task_id.as(String))\nend\n"}},{"html_id":"enqueue(task:Task):Task-instance-method","name":"enqueue","doc":"from queue.cr","summary":"<p>from queue.cr</p>","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task) : Task","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/redis_backend.cr","line_number":94,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L94"},"def":{"name":"enqueue","args":[{"name":"task","external_name":"task","restriction":"Task"}],"return_type":"Task","visibility":"Public","body":"redis.lpush(waiting_q, task.id)\ntask\n"}},{"html_id":"finish(task:Task)-instance-method","name":"finish","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task)","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>)","location":{"filename":"src/mosquito/redis_backend.cr","line_number":105,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L105"},"def":{"name":"finish","args":[{"name":"task","external_name":"task","restriction":"Task"}],"visibility":"Public","body":"redis.lrem(pending_q, 0, task.id)"}},{"html_id":"flush:Nil-instance-method","name":"flush","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":113,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L113"},"def":{"name":"flush","return_type":"Nil","visibility":"Public","body":"redis.del(waiting_q, pending_q, scheduled_q, dead_q)"}},{"html_id":"pending_q-instance-method","name":"pending_q","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":15,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L15"},"def":{"name":"pending_q","visibility":"Public","body":"build_key(\"pending\", name)"}},{"html_id":"redis-instance-method","name":"redis","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L6"},"def":{"name":"redis","visibility":"Public","body":"self.class.redis"}},{"html_id":"schedule(task:Task,atscheduled_time:Time):Task-instance-method","name":"schedule","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"scheduled_time","external_name":"at","restriction":"Time"}],"args_string":"(task : Task, at scheduled_time : Time) : Task","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>, at scheduled_time : Time) : <a href=\"../Mosquito/Task.html\">Task</a>","location":{"filename":"src/mosquito/redis_backend.cr","line_number":77,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L77"},"def":{"name":"schedule","args":[{"name":"task","external_name":"task","restriction":"Task"},{"name":"scheduled_time","external_name":"at","restriction":"Time"}],"return_type":"Task","visibility":"Public","body":"redis.zadd(scheduled_q, scheduled_time.to_unix_ms, task.id)\ntask\n"}},{"html_id":"scheduled_q-instance-method","name":"scheduled_q","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":15,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L15"},"def":{"name":"scheduled_q","visibility":"Public","body":"build_key(\"scheduled\", name)"}},{"html_id":"size(include_dead=true):Int64-instance-method","name":"size","abstract":false,"args":[{"name":"include_dead","default_value":"true","external_name":"include_dead","restriction":""}],"args_string":"(include_dead = true) : Int64","args_html":"(include_dead = <span class=\"n\">true</span>) : Int64","location":{"filename":"src/mosquito/redis_backend.cr","line_number":122,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L122"},"def":{"name":"size","args":[{"name":"include_dead","default_value":"true","external_name":"include_dead","restriction":""}],"return_type":"Int64","visibility":"Public","body":"queues = [waiting_q, pending_q]\nif include_dead\n  queues << dead_q\nend\nqueue_size = queues.map do |key|\n  redis.llen(key)\nend.reduce do |sum, i|\n  sum + i\nend\nscheduled_size = redis.zcount(scheduled_q, 0, \"+inf\")\nqueue_size + scheduled_size\n"}},{"html_id":"terminate(task:Task)-instance-method","name":"terminate","abstract":false,"args":[{"name":"task","external_name":"task","restriction":"Task"}],"args_string":"(task : Task)","args_html":"(task : <a href=\"../Mosquito/Task.html\">Task</a>)","location":{"filename":"src/mosquito/redis_backend.cr","line_number":109,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L109"},"def":{"name":"terminate","args":[{"name":"task","external_name":"task","restriction":"Task"}],"visibility":"Public","body":"redis.lpush(dead_q, task.id)"}},{"html_id":"waiting_q-instance-method","name":"waiting_q","abstract":false,"location":{"filename":"src/mosquito/redis_backend.cr","line_number":15,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/redis_backend.cr#L15"},"def":{"name":"waiting_q","visibility":"Public","body":"build_key(\"waiting\", name)"}}]},{"html_id":"mosquito/Mosquito/Runner","path":"Mosquito/Runner.html","kind":"class","full_name":"Mosquito::Runner","name":"Runner","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/runner.cr","line_number":4,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L4"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"class_methods":[{"html_id":"start-class-method","name":"start","abstract":false,"location":{"filename":"src/mosquito/runner.cr","line_number":14,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L14"},"def":{"name":"start","visibility":"Public","body":"Log.info do\n  \"Mosquito is buzzing...\"\nend\ninstance = new\nwhile true\n  instance.run\nend\n"}}],"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/mosquito/runner.cr","line_number":25,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L25"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"failed_job_ttl:Int32-instance-method","name":"failed_job_ttl","doc":"How long a job config is persisted after failure","summary":"<p>How long a job config is persisted after failure</p>","abstract":false,"location":{"filename":"src/mosquito/runner.cr","line_number":12,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L12"},"def":{"name":"failed_job_ttl","return_type":"Int32","visibility":"Public","body":"@failed_job_ttl"}},{"html_id":"failed_job_ttl=(failed_job_ttl:Int32)-instance-method","name":"failed_job_ttl=","doc":"How long a job config is persisted after failure","summary":"<p>How long a job config is persisted after failure</p>","abstract":false,"args":[{"name":"failed_job_ttl","external_name":"failed_job_ttl","restriction":"Int32"}],"args_string":"(failed_job_ttl : Int32)","args_html":"(failed_job_ttl : Int32)","location":{"filename":"src/mosquito/runner.cr","line_number":12,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L12"},"def":{"name":"failed_job_ttl=","args":[{"name":"failed_job_ttl","external_name":"failed_job_ttl","restriction":"Int32"}],"visibility":"Public","body":"@failed_job_ttl = failed_job_ttl"}},{"html_id":"idle_wait:Float64-instance-method","name":"idle_wait","doc":"Minimum time in seconds to wait between checking for jobs.","summary":"<p>Minimum time in seconds to wait between checking for jobs.</p>","abstract":false,"location":{"filename":"src/mosquito/runner.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L6"},"def":{"name":"idle_wait","return_type":"Float64","visibility":"Public","body":"@idle_wait"}},{"html_id":"idle_wait=(idle_wait:Float64)-instance-method","name":"idle_wait=","doc":"Minimum time in seconds to wait between checking for jobs.","summary":"<p>Minimum time in seconds to wait between checking for jobs.</p>","abstract":false,"args":[{"name":"idle_wait","external_name":"idle_wait","restriction":"Float64"}],"args_string":"(idle_wait : Float64)","args_html":"(idle_wait : Float64)","location":{"filename":"src/mosquito/runner.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L6"},"def":{"name":"idle_wait=","args":[{"name":"idle_wait","external_name":"idle_wait","restriction":"Float64"}],"visibility":"Public","body":"@idle_wait = idle_wait"}},{"html_id":"queues:Array(Mosquito::Queue)-instance-method","name":"queues","abstract":false,"location":{"filename":"src/mosquito/runner.cr","line_number":23,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L23"},"def":{"name":"queues","visibility":"Public","body":"@queues"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/mosquito/runner.cr","line_number":37,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L37"},"def":{"name":"run","visibility":"Public","body":"set_start_time\nfetch_queues\nenqueue_periodic_tasks\nenqueue_delayed_tasks\ndequeue_and_run_tasks\nidle\n"}},{"html_id":"start_time:Int64-instance-method","name":"start_time","abstract":false,"location":{"filename":"src/mosquito/runner.cr","line_number":23,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L23"},"def":{"name":"start_time","visibility":"Public","body":"@start_time"}},{"html_id":"successful_job_ttl:Int32-instance-method","name":"successful_job_ttl","doc":"How long a job config is persisted after success","summary":"<p>How long a job config is persisted after success</p>","abstract":false,"location":{"filename":"src/mosquito/runner.cr","line_number":9,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L9"},"def":{"name":"successful_job_ttl","return_type":"Int32","visibility":"Public","body":"@successful_job_ttl"}},{"html_id":"successful_job_ttl=(successful_job_ttl:Int32)-instance-method","name":"successful_job_ttl=","doc":"How long a job config is persisted after success","summary":"<p>How long a job config is persisted after success</p>","abstract":false,"args":[{"name":"successful_job_ttl","external_name":"successful_job_ttl","restriction":"Int32"}],"args_string":"(successful_job_ttl : Int32)","args_html":"(successful_job_ttl : Int32)","location":{"filename":"src/mosquito/runner.cr","line_number":9,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/runner.cr#L9"},"def":{"name":"successful_job_ttl=","args":[{"name":"successful_job_ttl","external_name":"successful_job_ttl","restriction":"Int32"}],"visibility":"Public","body":"@successful_job_ttl = successful_job_ttl"}}]},{"html_id":"mosquito/Mosquito/ScheduledJob","path":"Mosquito/ScheduledJob.html","kind":"class","full_name":"Mosquito::ScheduledJob","name":"ScheduledJob","abstract":true,"superclass":{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"},"ancestors":[{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"},{"html_id":"mosquito/Mosquito/Serializers/Primitives","kind":"module","full_name":"Mosquito::Serializers::Primitives","name":"Primitives"},{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/scheduled_job.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/scheduled_job.cr#L2"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/mosquito/scheduled_job.cr","line_number":3,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/scheduled_job.cr#L3"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"build_task-instance-method","name":"build_task","abstract":true,"location":{"filename":"src/mosquito/scheduled_job.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/scheduled_job.cr#L6"},"def":{"name":"build_task","visibility":"Public","body":""}},{"html_id":"rescheduleable?-instance-method","name":"rescheduleable?","doc":"abstract, override if desired.\n\nTrue if this job is rescheduleable, false if not.","summary":"<p>abstract, override if desired.</p>","abstract":false,"location":{"filename":"src/mosquito/scheduled_job.cr","line_number":28,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/scheduled_job.cr#L28"},"def":{"name":"rescheduleable?","visibility":"Public","body":"false"}}]},{"html_id":"mosquito/Mosquito/Serializers","path":"Mosquito/Serializers.html","kind":"module","full_name":"Mosquito::Serializers","name":"Serializers","abstract":false,"locations":[{"filename":"src/mosquito/serializers/primitives.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L1"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"types":[{"html_id":"mosquito/Mosquito/Serializers/Primitives","path":"Mosquito/Serializers/Primitives.html","kind":"module","full_name":"Mosquito::Serializers::Primitives","name":"Primitives","abstract":false,"locations":[{"filename":"src/mosquito/serializers/primitives.cr","line_number":1,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L1"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"including_types":[{"html_id":"mosquito/Mosquito/Job","kind":"class","full_name":"Mosquito::Job","name":"Job"}],"namespace":{"html_id":"mosquito/Mosquito/Serializers","kind":"module","full_name":"Mosquito::Serializers","name":"Serializers"},"instance_methods":[{"html_id":"deserialize_bool(raw:String):Bool-instance-method","name":"deserialize_bool","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Bool","args_html":"(raw : String) : Bool","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":14,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L14"},"def":{"name":"deserialize_bool","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Bool","visibility":"Public","body":"raw == \"true\""}},{"html_id":"deserialize_char(raw:String):Char-instance-method","name":"deserialize_char","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Char","args_html":"(raw : String) : Char","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":26,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L26"},"def":{"name":"deserialize_char","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Char","visibility":"Public","body":"raw[0]"}},{"html_id":"deserialize_float32(raw:String):Float32?-instance-method","name":"deserialize_float32","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Float32?","args_html":"(raw : String) : Float32?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_float32","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Float32 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_f32\nend"}},{"html_id":"deserialize_float64(raw:String):Float64?-instance-method","name":"deserialize_float64","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Float64?","args_html":"(raw : String) : Float64?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_float64","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Float64 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_f64\nend"}},{"html_id":"deserialize_int128(raw:String):Int128?-instance-method","name":"deserialize_int128","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Int128?","args_html":"(raw : String) : Int128?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_int128","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Int128 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_i128\nend"}},{"html_id":"deserialize_int16(raw:String):Int16?-instance-method","name":"deserialize_int16","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Int16?","args_html":"(raw : String) : Int16?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_int16","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Int16 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_i16\nend"}},{"html_id":"deserialize_int32(raw:String):Int32?-instance-method","name":"deserialize_int32","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Int32?","args_html":"(raw : String) : Int32?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_int32","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_i32\nend"}},{"html_id":"deserialize_int64(raw:String):Int64?-instance-method","name":"deserialize_int64","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Int64?","args_html":"(raw : String) : Int64?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_int64","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Int64 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_i64\nend"}},{"html_id":"deserialize_int8(raw:String):Int8?-instance-method","name":"deserialize_int8","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : Int8?","args_html":"(raw : String) : Int8?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_int8","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"Int8 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_i8\nend"}},{"html_id":"deserialize_string(raw:String):String?-instance-method","name":"deserialize_string","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : String?","args_html":"(raw : String) : String?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":6,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L6"},"def":{"name":"deserialize_string","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"String | ::Nil","visibility":"Public","body":"raw"}},{"html_id":"deserialize_u_int128(raw:String):UInt128?-instance-method","name":"deserialize_u_int128","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : UInt128?","args_html":"(raw : String) : UInt128?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_u_int128","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"UInt128 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_u128\nend"}},{"html_id":"deserialize_u_int16(raw:String):UInt16?-instance-method","name":"deserialize_u_int16","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : UInt16?","args_html":"(raw : String) : UInt16?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_u_int16","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"UInt16 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_u16\nend"}},{"html_id":"deserialize_u_int32(raw:String):UInt32?-instance-method","name":"deserialize_u_int32","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : UInt32?","args_html":"(raw : String) : UInt32?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_u_int32","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"UInt32 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_u32\nend"}},{"html_id":"deserialize_u_int64(raw:String):UInt64?-instance-method","name":"deserialize_u_int64","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : UInt64?","args_html":"(raw : String) : UInt64?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_u_int64","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"UInt64 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_u64\nend"}},{"html_id":"deserialize_u_int8(raw:String):UInt8?-instance-method","name":"deserialize_u_int8","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : UInt8?","args_html":"(raw : String) : UInt8?","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"deserialize_u_int8","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"UInt8 | ::Nil","visibility":"Public","body":"if raw\n  raw.to_u8\nend"}},{"html_id":"deserialize_uuid(raw:String):UUID-instance-method","name":"deserialize_uuid","abstract":false,"args":[{"name":"raw","external_name":"raw","restriction":"String"}],"args_string":"(raw : String) : UUID","args_html":"(raw : String) : UUID","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":34,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L34"},"def":{"name":"deserialize_uuid","args":[{"name":"raw","external_name":"raw","restriction":"String"}],"return_type":"UUID","visibility":"Public","body":"UUID.new(raw)"}},{"html_id":"serialize_bool(value:Bool):String-instance-method","name":"serialize_bool","abstract":false,"args":[{"name":"value","external_name":"value","restriction":"Bool"}],"args_string":"(value : Bool) : String","args_html":"(value : Bool) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":10,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L10"},"def":{"name":"serialize_bool","args":[{"name":"value","external_name":"value","restriction":"Bool"}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_char(char:Char):String-instance-method","name":"serialize_char","abstract":false,"args":[{"name":"char","external_name":"char","restriction":"Char"}],"args_string":"(char : Char) : String","args_html":"(char : Char) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":22,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L22"},"def":{"name":"serialize_char","args":[{"name":"char","external_name":"char","restriction":"Char"}],"return_type":"String","visibility":"Public","body":"char.to_s"}},{"html_id":"serialize_float32(value):String-instance-method","name":"serialize_float32","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_float32","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_float64(value):String-instance-method","name":"serialize_float64","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_float64","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_int128(value):String-instance-method","name":"serialize_int128","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_int128","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_int16(value):String-instance-method","name":"serialize_int16","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_int16","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_int32(value):String-instance-method","name":"serialize_int32","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_int32","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_int64(value):String-instance-method","name":"serialize_int64","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_int64","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_int8(value):String-instance-method","name":"serialize_int8","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_int8","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_string(str:String):String-instance-method","name":"serialize_string","abstract":false,"args":[{"name":"str","external_name":"str","restriction":"String"}],"args_string":"(str : String) : String","args_html":"(str : String) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":2,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L2"},"def":{"name":"serialize_string","args":[{"name":"str","external_name":"str","restriction":"String"}],"return_type":"String","visibility":"Public","body":"str"}},{"html_id":"serialize_symbol(sym:Symbol):Nil-instance-method","name":"serialize_symbol","abstract":false,"args":[{"name":"sym","external_name":"sym","restriction":"Symbol"}],"args_string":"(sym : Symbol) : Nil","args_html":"(sym : Symbol) : Nil","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":18,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L18"},"def":{"name":"serialize_symbol","args":[{"name":"sym","external_name":"sym","restriction":"Symbol"}],"return_type":"Nil","visibility":"Public","body":"raise(\"Symbols cannot be deserialized. Stringify your symbol first to pass it as a mosquito job parameter.\")"}},{"html_id":"serialize_u_int128(value):String-instance-method","name":"serialize_u_int128","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_u_int128","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_u_int16(value):String-instance-method","name":"serialize_u_int16","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_u_int16","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_u_int32(value):String-instance-method","name":"serialize_u_int32","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_u_int32","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_u_int64(value):String-instance-method","name":"serialize_u_int64","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_u_int64","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_u_int8(value):String-instance-method","name":"serialize_u_int8","abstract":false,"args":[{"name":"value","external_name":"value","restriction":""}],"args_string":"(value) : String","args_html":"(value) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":38,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L38"},"def":{"name":"serialize_u_int8","args":[{"name":"value","external_name":"value","restriction":""}],"return_type":"String","visibility":"Public","body":"value.to_s"}},{"html_id":"serialize_uuid(uuid:UUID):String-instance-method","name":"serialize_uuid","abstract":false,"args":[{"name":"uuid","external_name":"uuid","restriction":"UUID"}],"args_string":"(uuid : UUID) : String","args_html":"(uuid : UUID) : String","location":{"filename":"src/mosquito/serializers/primitives.cr","line_number":30,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/serializers/primitives.cr#L30"},"def":{"name":"serialize_uuid","args":[{"name":"uuid","external_name":"uuid","restriction":"UUID"}],"return_type":"String","visibility":"Public","body":"uuid.to_s"}}]}]},{"html_id":"mosquito/Mosquito/Task","path":"Mosquito/Task.html","kind":"class","full_name":"Mosquito::Task","name":"Task","abstract":false,"superclass":{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"mosquito/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"mosquito/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/mosquito/task.cr","line_number":11,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L11"}],"repository_name":"mosquito","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"CONFIG_KEY_PREFIX","name":"CONFIG_KEY_PREFIX","value":"\"task\""}],"namespace":{"html_id":"mosquito/Mosquito","kind":"module","full_name":"Mosquito","name":"Mosquito"},"doc":"A Task is a unit of work which will be performed by a Job.\nTasks know how to:\n- store and retrieve their data to and from the datastore\n- figure out what Job class they match to\n- build an instance of that Job class and pass off the config data\n- Ask the job to run\n\nTask data is called `config` and is persisted in the backend under the key\n`mosquito:task:task_id`.","summary":"<p>A Task is a unit of work which will be performed by a Job.</p>","class_methods":[{"html_id":"config_key(*parts)-class-method","name":"config_key","abstract":false,"args":[{"name":"parts","external_name":"parts","restriction":""}],"args_string":"(*parts)","args_html":"(*parts)","location":{"filename":"src/mosquito/task.cr","line_number":26,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L26"},"def":{"name":"config_key","args":[{"name":"parts","external_name":"parts","restriction":""}],"splat_index":0,"visibility":"Public","body":"Mosquito.backend.build_key(CONFIG_KEY_PREFIX, parts)"}},{"html_id":"retrieve(id:String)-class-method","name":"retrieve","abstract":false,"args":[{"name":"id","external_name":"id","restriction":"String"}],"args_string":"(id : String)","args_html":"(id : String)","location":{"filename":"src/mosquito/task.cr","line_number":97,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L97"},"def":{"name":"retrieve","args":[{"name":"id","external_name":"id","restriction":"String"}],"visibility":"Public","body":"fields = Mosquito.backend.retrieve(config_key(id))\nif name = fields.delete(\"type\")\nelse\n  return\nend\nif timestamp = fields.delete(\"enqueue_time\")\nelse\n  return\nend\nretry_count = ((fields.delete(\"retry_count\")) || 0).to_i\ninstance = new(name, Time.unix_ms(timestamp.to_i64), id, retry_count)\ninstance.config = fields\ninstance\n"}}],"constructors":[{"html_id":"new(type:String,enqueue_time:Time=Time.utc,id:String?=nil,retry_count:Int32=0)-class-method","name":"new","abstract":false,"args":[{"name":"type","external_name":"type","restriction":"String"},{"name":"enqueue_time","default_value":"Time.utc","external_name":"enqueue_time","restriction":"Time"},{"name":"id","default_value":"nil","external_name":"id","restriction":"String | ::Nil"},{"name":"retry_count","default_value":"0","external_name":"retry_count","restriction":"Int32"}],"args_string":"(type : String, enqueue_time : Time = Time.utc, id : String? = nil, retry_count : Int32 = 0)","args_html":"(type : String, enqueue_time : Time = <span class=\"t\">Time</span>.utc, id : String? = <span class=\"n\">nil</span>, retry_count : Int32 = <span class=\"n\">0</span>)","location":{"filename":"src/mosquito/task.cr","line_number":34,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L34"},"def":{"name":"new","args":[{"name":"type","external_name":"type","restriction":"String"},{"name":"enqueue_time","default_value":"Time.utc","external_name":"enqueue_time","restriction":"Time"},{"name":"id","default_value":"nil","external_name":"id","restriction":"String | ::Nil"},{"name":"retry_count","default_value":"0","external_name":"retry_count","restriction":"Int32"}],"visibility":"Public","body":"_ = allocate\n_.initialize(type, enqueue_time, id, retry_count)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"==(other:self)-instance-method","name":"==","doc":"Returns `true` if this reference is the same as *other*. Invokes `same?`.","summary":"<p>Returns <code>true</code> if this reference is the same as <em>other</em>.</p>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"self"}],"args_string":"(other : self)","args_html":"(other : <span class=\"k\">self</span>)","location":{"filename":"src/mosquito/task.cr","line_number":114,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L114"},"def":{"name":"==","args":[{"name":"other","external_name":"other","restriction":"self"}],"visibility":"Public","body":"id == self.id"}},{"html_id":"build_job-instance-method","name":"build_job","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":59,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L59"},"def":{"name":"build_job","visibility":"Public","body":"if @job.class == NilJob\nelse\n  return @job\nend\n@job = instance = (Base.job_for_type(type)).new\nif instance.responds_to?(:vars_from)\n  instance.vars_from(config)\nend\ninstance.task_id = id\ninstance\n"}},{"html_id":"config:Hash(String,String)-instance-method","name":"config","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":18,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L18"},"def":{"name":"config","visibility":"Public","body":"@config"}},{"html_id":"config=(config)-instance-method","name":"config=","abstract":false,"args":[{"name":"config","external_name":"config","restriction":""}],"args_string":"(config)","args_html":"(config)","location":{"filename":"src/mosquito/task.cr","line_number":18,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L18"},"def":{"name":"config=","args":[{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"@config = config"}},{"html_id":"config_key-instance-method","name":"config_key","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":22,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L22"},"def":{"name":"config_key","visibility":"Public","body":"self.class.config_key(id)"}},{"html_id":"delete(inttl=0)-instance-method","name":"delete","abstract":false,"args":[{"name":"ttl","default_value":"0","external_name":"in","restriction":""}],"args_string":"(in ttl = 0)","args_html":"(in ttl = <span class=\"n\">0</span>)","location":{"filename":"src/mosquito/task.cr","line_number":55,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L55"},"def":{"name":"delete","args":[{"name":"ttl","default_value":"0","external_name":"in","restriction":""}],"visibility":"Public","body":"Mosquito.backend.delete(config_key, ttl)"}},{"html_id":"enqueue_time:Time-instance-method","name":"enqueue_time","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":13,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L13"},"def":{"name":"enqueue_time","return_type":"Time","visibility":"Public","body":"@enqueue_time"}},{"html_id":"executed?(*args,**options)-instance-method","name":"executed?","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"executed?","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@job.executed?(*args, **options)"}},{"html_id":"executed?(*args,**options,&)-instance-method","name":"executed?","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"executed?","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"visibility":"Public","body":"@job.executed?(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"fail-instance-method","name":"fail","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":82,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L82"},"def":{"name":"fail","visibility":"Public","body":"@retry_count = @retry_count + 1\nstore\n"}},{"html_id":"failed(*args,**options)-instance-method","name":"failed","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"failed","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@job.failed(*args, **options)"}},{"html_id":"failed(*args,**options,&)-instance-method","name":"failed","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"failed","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"visibility":"Public","body":"@job.failed(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"failed?(*args,**options)-instance-method","name":"failed?","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"failed?","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@job.failed?(*args, **options)"}},{"html_id":"failed?(*args,**options,&)-instance-method","name":"failed?","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"failed?","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"visibility":"Public","body":"@job.failed?(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"id:String-instance-method","name":"id","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":14,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L14"},"def":{"name":"id","return_type":"String","visibility":"Public","body":"@id"}},{"html_id":"job:Mosquito::Job-instance-method","name":"job","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":16,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L16"},"def":{"name":"job","return_type":"Mosquito::Job","visibility":"Public","body":"@job"}},{"html_id":"reschedule_interval-instance-method","name":"reschedule_interval","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":91,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L91"},"def":{"name":"reschedule_interval","visibility":"Public","body":"job.reschedule_interval(@retry_count)"}},{"html_id":"rescheduleable?-instance-method","name":"rescheduleable?","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":87,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L87"},"def":{"name":"rescheduleable?","visibility":"Public","body":"job.rescheduleable?(@retry_count)"}},{"html_id":"rescheduled(*args,**options)-instance-method","name":"rescheduled","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"rescheduled","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@job.rescheduled(*args, **options)"}},{"html_id":"rescheduled(*args,**options,&)-instance-method","name":"rescheduled","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"rescheduled","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"visibility":"Public","body":"@job.rescheduled(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"retry_count:Int32-instance-method","name":"retry_count","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":15,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L15"},"def":{"name":"retry_count","visibility":"Public","body":"@retry_count"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":72,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L72"},"def":{"name":"run","visibility":"Public","body":"instance = build_job\ninstance.run\nif executed? && failed?\n  @retry_count = @retry_count + 1\n  store\nend\n"}},{"html_id":"store-instance-method","name":"store","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":46,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L46"},"def":{"name":"store","visibility":"Public","body":"fields = config.dup\nfields[\"enqueue_time\"] = enqueue_time.to_unix_ms.to_s\nfields[\"type\"] = type\nfields[\"retry_count\"] = retry_count.to_s\nMosquito.backend.store(config_key, fields)\n"}},{"html_id":"succeeded?(*args,**options)-instance-method","name":"succeeded?","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"succeeded?","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@job.succeeded?(*args, **options)"}},{"html_id":"succeeded?(*args,**options,&)-instance-method","name":"succeeded?","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/mosquito/task.cr","line_number":95,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L95"},"def":{"name":"succeeded?","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"visibility":"Public","body":"@job.succeeded?(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"to_s(io:IO)-instance-method","name":"to_s","doc":"Appends a short String representation of this object\nwhich includes its class name and its object address.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).to_s # => #<Person:0x10a199f20>\n```","summary":"<p>Appends a short String representation of this object which includes its class name and its object address.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/mosquito/task.cr","line_number":110,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L110"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"visibility":"Public","body":"\"#{type}<#{id}>\".to_s(io)"}},{"html_id":"type:String-instance-method","name":"type","abstract":false,"location":{"filename":"src/mosquito/task.cr","line_number":12,"url":"https://github.com/mosquito-cr/mosquito/blob/2af192fca66ed0afe5d8ea641b71c70baaee7a80/src/mosquito/task.cr#L12"},"def":{"name":"type","visibility":"Public","body":"@type"}}]}]}]}})